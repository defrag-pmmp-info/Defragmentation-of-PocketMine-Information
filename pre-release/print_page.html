
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.4">
    
    
      
        <title>Print as PDF - defrag-pmmp-info/Defragmentation-of-PocketMine-Information</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.db9e7362.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="css/print-site.css">
    
      <link rel="stylesheet" href="css/print-site-material.css">
    
    
      


    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="index.html" title="defrag-pmmp-info/Defragmentation-of-PocketMine-Information" class="md-header__button md-logo" aria-label="defrag-pmmp-info/Defragmentation-of-PocketMine-Information" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            defrag-pmmp-info/Defragmentation-of-PocketMine-Information
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print as PDF
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="クリア" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/defrag-pmmp-info/Defragmentation-of-PocketMine-Information/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="defrag-pmmp-info/Defragmentation-of-PocketMine-Information" class="md-nav__button md-logo" aria-label="defrag-pmmp-info/Defragmentation-of-PocketMine-Information" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    defrag-pmmp-info/Defragmentation-of-PocketMine-Information
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/defrag-pmmp-info/Defragmentation-of-PocketMine-Information/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        ようこそ
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          サーバー構築
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="サーバー構築" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          サーバー構築
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="building/index.html" class="md-nav__link">
        サーバー構築
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="building/build-in-api4.html" class="md-nav__link">
        API4でのサーバー構築
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          プラグイン開発
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="プラグイン開発" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          プラグイン開発
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="plugin-develop/api-versioning.html" class="md-nav__link">
        APIバージョニング: API versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="plugin-develop/language.html" class="md-nav__link">
        多言語対応
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          API4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API4" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          API4
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api4/index.html" class="md-nav__link">
        API4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api4/changelogs.html" class="md-nav__link">
        API4 Changelogs全訳(41%完了)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          単項記事
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="単項記事" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          単項記事
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          Poggit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Poggit" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Poggit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dictionary/poggit/poggit.html" class="md-nav__link">
        Poggit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dictionary/poggit/virion.html" class="md-nav__link">
        Virion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="link.html" class="md-nav__link">
        リンク集
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Print as PDF
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="print_page.html" class="md-nav__link md-nav__link--active">
        Print as PDF
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    ようこそ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-サーバー構築" class="md-nav__link">
    サーバー構築
  </a>
  
    <nav class="md-nav" aria-label="サーバー構築">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-index" class="md-nav__link">
    サーバー構築
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-build-in-api4" class="md-nav__link">
    API4でのサーバー構築
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-プラグイン開発" class="md-nav__link">
    プラグイン開発
  </a>
  
    <nav class="md-nav" aria-label="プラグイン開発">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugin-develop-api-versioning" class="md-nav__link">
    APIバージョニング: API versioning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugin-develop-language" class="md-nav__link">
    多言語対応
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-api4" class="md-nav__link">
    API4
  </a>
  
    <nav class="md-nav" aria-label="API4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api4-index" class="md-nav__link">
    API4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api4-changelogs" class="md-nav__link">
    API4 Changelogs全訳(41%完了)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-単項記事" class="md-nav__link">
    単項記事
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#link" class="md-nav__link">
    リンク集
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    ようこそ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-サーバー構築" class="md-nav__link">
    サーバー構築
  </a>
  
    <nav class="md-nav" aria-label="サーバー構築">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-index" class="md-nav__link">
    サーバー構築
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-build-in-api4" class="md-nav__link">
    API4でのサーバー構築
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-プラグイン開発" class="md-nav__link">
    プラグイン開発
  </a>
  
    <nav class="md-nav" aria-label="プラグイン開発">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugin-develop-api-versioning" class="md-nav__link">
    APIバージョニング: API versioning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugin-develop-language" class="md-nav__link">
    多言語対応
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-api4" class="md-nav__link">
    API4
  </a>
  
    <nav class="md-nav" aria-label="API4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api4-index" class="md-nav__link">
    API4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api4-changelogs" class="md-nav__link">
    API4 Changelogs全訳(41%完了)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-単項記事" class="md-nav__link">
    単項記事
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#link" class="md-nav__link">
    リンク集
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
  
                
                
                <div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="6">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Index</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-defragmentation-of-pocketmine-information">Defragmentation of PocketMine information</h1>
<p>散っているPocketMine-MPの情報収集やpmmp公式からの情報の翻訳を行い、情報をまとめて掲載します。</p>
<h2 id="index-_1">現在掲載してる情報</h2>
<ul>
<li><strong><a href="#building">サーバー構築</a></strong> API3およびAPI4でのサーバー構築について</li>
<li><strong><a href="#api4">API4</a></strong> API4での変更点や関連情報を掲載</li>
<li><strong><a href="#plugin-develop">プラグイン</a></strong> プラグイン開発情報, 現在はAPIバージョニングのみ</li>
<li><strong><a href="#dictionary">単項記事</a></strong> 現在はpoggitとvirion情報の翻訳</li>
</ul>
<h2 id="index-contribute">Contribute</h2>
<p>PRやIssueなどで足りていない情報の補完をしてもらえると助かります。Issueテンプレートを利用してください。</p>
<p><a href="https://dpmi.f5.si/">https://dpmi.f5.si/</a>からmkdocs形式で見られます。</p></section>
                        <h1 class='nav-section-title' id='section-サーバー構築'>
                            サーバー構築 <a class='headerlink' href='#section-サーバー構築' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="building-index"><h1 id="building-index-_1">サーバー構築</h1>
<p>ここではサーバー構築について記述します
API4.0.0(ベータ版)での構築は<a href="#building-build-in-api4">API4.0.0での構築</a>を参照してください</p>
<p>このページは <a href="https://pmmp.readthedocs.io/en/rtfd/installation/requirements.html">pmmp.readthedocs.io</a>を参考にしています。</p>
<h2 id="building-index-httpsgetpmmpio-linuxmacos">https://get.pmmp.io の利用(Linux/MacOS 限定)</h2>
<p>PocketMine-MPをインストールしたいディレクトリを作成して、そのディレクトリを端末で開きます。</p>
<p><code>curl</code>または<code>wget</code>を用いてPocketMine-MPをインストールできます。
<div class="highlight"><pre><span></span><code>curl -sL https://get.pmmp.io <span class="p">|</span> bash -s -
</code></pre></div>
または
<div class="highlight"><pre><span></span><code>wget -q -O - https://get.pmmp.io <span class="p">|</span> bash -s -
</code></pre></div>
するとこのような表示が出るはずです。
<div class="highlight"><pre><span></span><code>[*] Found PocketMine-MP Final_1.5dev (build 1254) using API 1.12.0
[*] This development build was released on Sat Jun 20 09:45:04 CEST 2015
[*] Installing/updating PocketMine-MP on directory ./
[1/3] Cleaning...
[2/3] Downloading PocketMine-MP Final_1.5dev-1254 phar... done!
[3/3] Obtaining PHP: detecting if build is available...
[3/3] MacOS 64-bit PHP build available, downloading PHP_5.6.10_x86-64_MacOS.tar.gz... checking... regenerating php.ini... done
[*] Everything done! Run ./start.sh to start PocketMine-MP
</code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>うまく動作しなかったら手動インストールを試してみてください</p>
</div>
<h2 id="building-index-powershellwindows">PowerShellスクリプトの利用(Windows 限定)</h2>
<p>PocketMine-MPをインストールしたいディレクトリを作成して、そのディレクトリをPowerShellで開きます。
<div class="highlight"><pre><span></span><code><span class="nb">wget </span><span class="n">https</span><span class="p">://</span><span class="n">gist</span><span class="p">.</span><span class="n">githubusercontent</span><span class="p">.</span><span class="n">com</span><span class="p">/</span><span class="n">famima65536</span><span class="p">/</span><span class="n">d1493bd3e4713f09aed2c70e428a5064</span><span class="p">/</span><span class="n">raw</span><span class="p">/</span><span class="n">0935f747077fe3454b329801a93fe30bb1b55919</span><span class="p">/</span><span class="n">install</span><span class="p">.</span><span class="n">ps1</span> <span class="n">-OutFile</span> <span class="n">temp-install</span><span class="p">.</span><span class="n">ps1</span><span class="p">;</span> <span class="p">./</span><span class="n">temp-install</span><span class="p">.</span><span class="n">ps1</span><span class="p">;</span> <span class="nb">Remove-Item</span> <span class="n">temp-install</span><span class="p">.</span><span class="n">ps1</span>
</code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>うまく動作しなかったら手動インストールを試してみてください</p>
</div>
<h2 id="building-index-_2">手動インストール</h2>
<h3 id="building-index-_3">必要なファイルの準備</h3>
<p>PocketMine-MPを最低限起動するためには</p>
<ul>
<li><strong>PocketMine-MP.phar</strong> サーバーの本体</li>
<li><strong>PHPバイナリ</strong> サーバーを動作させるプログラム</li>
<li><strong>スタート用スクリプト</strong> サーバーを起動するためのファイル<ul>
<li>start.cmd / start.ps1 (Windows)</li>
<li>start.sh (Linux/Mac)</li>
</ul>
</li>
</ul>
<p>以上の3つが必要です。<a href="#link">リンク集</a>を見てダウンロードしてください。</p>
<h3 id="building-index-_4">ディレクトリ配置</h3>
<p>バイナリはzip形式のため展開し、以下のようにファイルを配置します。
<div class="highlight"><pre><span></span><code>|-- bin/
|-- PocketMine-MP.phar
|-- start.cmd(またはstart.ps1)
</code></pre></div></p>
<h3 id="building-index-_5">サーバーの起動</h3>
<p>start.cmdまたはstart.ps1を実行することでサーバーが起動されます。</p></section><section class="print-page" id="building-build-in-api4"><h1 id="building-build-in-api4-api4">API4でのサーバー構築</h1>
<h2 id="building-build-in-api4-_1">警告</h2>
<p>これは安定版リリースでは<strong>ありません</strong>。予期しないバグが存在する可能性があります。</p>
<h2 id="building-build-in-api4-_2">必要なファイルの準備</h2>
<ul>
<li><strong>PocketMine-MP.phar</strong></li>
<li><strong>PHPバイナリ(API4用)</strong></li>
<li><strong>start.cmd/start.ps1/start.sh</strong> API3のものが利用可能</li>
</ul>
<h3 id="building-build-in-api4-pocketmine-mpphar">PocketMine-MP.pharのダウンロード</h3>
<p>API4のものは現段階ではPre-releaseでありGitHubのreleasesからダウンロードできます。
<a href="https://github.com/pmmp/PocketMine-MP/releases">https://github.com/pmmp/PocketMine-MP/releases</a></p>
<h3 id="building-build-in-api4-php">PHPバイナリのダウンロード</h3>
<p>API4ではPHP拡張の一部が変更されたため、それが導入されているPHPバイナリが必要になります。以下の手順でダウンロードしてください。<a href="https://dev.azure.com/pocketmine/PHP-Builds/_build?definitionId=3&amp;_a=summary">https://dev.azure.com/pocketmine/PHP-Builds/_build?definitionId=3&amp;_a=summary</a></p>
<p><img alt="masterブランチのLast run" src="/image/e987af6f-2a36-474c-a926-69272498c823.png" />
マスターブランチのLast run以下をクリック</p>
<p><img alt="published" src="/image/d9f2aaa6-3d32-4f49-921c-c0698ff28ea2.png" />
publishedをクリック</p>
<p><img alt="artifact" src="/image/0ecfc460-fe8d-41e9-b62f-9c21cff0298e.png" />
対応するOSの︙をクリックし、ダウンロードを選択</p>
<h2 id="building-build-in-api4-_3">ダウンロード後</h2>
<p>これ以降は<a href="#building-readme.md-_2">API3の手動インストール</a>と同様の手順で進められます。</p></section><h1 class='nav-section-title-end'>Ended: サーバー構築</h1>
                        <h1 class='nav-section-title' id='section-プラグイン開発'>
                            プラグイン開発 <a class='headerlink' href='#section-プラグイン開発' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="plugin-develop-api-versioning"><h1 id="plugin-develop-api-versioning-api-api-versioning">APIバージョニング: API versioning</h1>
<p>PocketMine-MPのプラグインはどのAPIバージョンと互換性があるかを宣言する必要があります。これはプラグインをロードするかしないかを決定し、サーバーバージョンと適合しなかったときにデグレードするために用いられます。</p>
<h2 id="plugin-develop-api-versioning-api">APIバージョンシステムの説明</h2>
<p>PocketMine-MP 3.0.0現在ではAPIバージョンとサーバーバージョンは一致しています。このバージョンは<a href="https://semver.org/lang/ja/">semantic major.minor.patch version number</a>で表します。</p>
<h3 id="plugin-develop-api-versioning-_1">定義</h3>
<p>Semverは大まかには以下のように定義されます。
- メジャーバージョンアップ: 破壊的な変更 - APIに準じるプラグインが動かなくなるレベルで公開APIが変更される。
- マイナーバージョンアップ: 機能の追加やAPIを破壊しない程度での大きな変更。これはAPIの非推奨化や新しいAPI機能が追加されることも含みうるが以前のマイナーバージョン向けに作られたプラグインは依然として動作する。
- パッチバージョンアップ: 大抵バグ修正。APIの破壊やそのバージョンのものに重大な変更があってはならない。</p>
<p>PocketMine-MPでは<code>==.&gt;=.&gt;=</code>(<code>bash</code>表記では<code>eq.ge.ge</code>)という条件をAPIバージョンの比較時に用いています。つまりこれは以下のことを表します。
- メジャーバージョンは互換性を持つためには<strong>必ず一致</strong>
- サーバーのマイナーバージョンは、プラグインのマイナーバージョン<strong>以上が必須</strong>
- サーバーのパッチバージョンもまた、プラグインのパッチバージョン<strong>以上が必須</strong></p>
<p>PocketMine-MP開発者はいかなる非メージャーバージョンにおいてもプラグインとAPIの互換性がなくならないようにする努力をします。つまり、<code>3.1.1</code>を対象に書かれたプラグインは<code>3.x.y</code>でも動くはずです。ただし<code>4.0.0</code>や将来のメジャーバージョンで動く保証はありません。</p>
<h3 id="plugin-develop-api-versioning-_2">例</h3>
<table>
<thead>
<tr>
<th align="left">サーバーバージョン</th>
<th align="left">プラグインバージョン</th>
<th align="center">互換性</th>
<th align="left">理由</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">4.0.0</td>
<td align="left">3.0.0</td>
<td align="center">無し</td>
<td align="left">メジャーバージョンが異なる</td>
</tr>
<tr>
<td align="left">3.1.0</td>
<td align="left">3.0.0</td>
<td align="center">あり</td>
<td align="left">サーバーがプラグインよりも高いマイナーバージョンを持ち、互換性が保証されるため</td>
</tr>
<tr>
<td align="left">3.0.0</td>
<td align="left">3.1.0</td>
<td align="center">無し</td>
<td align="left">プラグインがそのサーバーバージョンで持っていない機能を要求している</td>
</tr>
<tr>
<td align="left">3.0.1</td>
<td align="left">3.0.0</td>
<td align="center">あり</td>
<td align="left">サーバーがプラグインよりも高いパッチバージョンを持ち、互換性が保証されるため</td>
</tr>
<tr>
<td align="left">3.0.0</td>
<td align="left">3.0.1</td>
<td align="center">無し</td>
<td align="left">プラグインがそのサーバーバージョンで持っていないバグ修正を要求している</td>
</tr>
</tbody>
</table>
<h3 id="plugin-develop-api-versioning-api_1">サポートするAPIバージョンを選ぶ方法</h3>
<p>必要最小限バージョンを選ぶべきです。例えば必要とする機能が<code>3.1.0</code>で追加されているのであれば、現在のサポートされるバージョンが<code>3.2.0</code>であっても<code>3.1.0</code>を一番小さいバージョンとして要求できます。これによりどのバージョンのPocketMine-MPを使っているかによらずより良いUXを与えることができます。</p>
<p>もちろん、うまく動作することを保証するためにプラグインを最小限のバージョンでテストする必要があります。しかしながら、もう役目を終えている低いバージョンを要求するというのは意味がないこともあります。</p>
<h3 id="plugin-develop-api-versioning-_3">よくある誤解と落とし穴</h3>
<ul>
<li>APIバージョンは<strong>マジックナンバーではありません</strong>。盲目的にバージョンを変えてもそのバージョン向けになっていなければ<strong>プラグインは勝手に動きません</strong>。</li>
<li><strong>APIバージョンはプラグインマニフェスト内で一つずつ書かなければならないものではありません</strong>。<strong>それぞれのメジャーバージョン内で最小のバージョン</strong>のみが要求されます。<ul>
<li>良い例: <code>[3.1.0]</code>(単一の最小のバージョン), <code>[3.2.0, 4.0.0]</code>(異なる2つのメジャーバージョンでの最小のバージョン)</li>
<li><code>[3.1.0, 3.1.1, 3.1.2]</code> - これは望ましく<strong>なく</strong>、余計なバージョンは無視される</li>
</ul>
</li>
<li>プラグインが<strong>実際に指定したバージョンで動くこと</strong>を確かめてください。a) クラッシュするバージョンや b)期待されるように動作しないバージョンはバージョンリストから除外される必要があります。</li>
</ul>
<h2 id="plugin-develop-api-versioning-_4">翻訳元</h2>
<p>https://github.com/pmmp/DeveloperDocs/blob/b72417c924d0c917eeed6a172415edf7b5b3d52e/api-version-spec.md</p></section><section class="print-page" id="plugin-develop-language"><h1 id="plugin-develop-language-_1">多言語対応</h1>
<p>Poggitでプラグインをリリースする場合やサーバーを多言語対応する場合には<code>pocketmine\lang\Language</code>を用いることで比較的楽に対応することができます。また、これによりメッセージ送信部がスマートにできるかもしれません。</p>
<p><a href="https://github.com/pmmp/PocketMine-MP/blob/master/src/lang/Language.php">https://github.com/pmmp/PocketMine-MP/blob/master/src/lang/Language.php</a>より内容を抜粋。</p>
<h2 id="plugin-develop-language-language">Languageの利用</h2>
<p>例としてプラグインのディレクトリ構造が以下のようになっているとします。</p>
<p><div class="highlight"><pre><span></span><code>ExamplePlugin
├ resources
│ └ lang
│ 　 ├ jpn.ini
│ 　 └ eng.ini
├ src
│ └ ...
└ plugin.yml
</code></pre></div>
この場合、メインクラスにおいて
<div class="highlight"><pre><span></span><code><span class="x">$path = &quot;{$this-&gt;getFile()}/resources/lang&quot;;</span>
<span class="x">$language = new Language(&quot;jpn&quot;,$path);</span>
</code></pre></div>
とすれば、<code>$language</code>にはjpn.iniがロードされた状態になります。</p>
<p>例えば、<code>jpn.ini</code>の中身が以下のようであったとします。
<div class="highlight"><pre><span></span><code><span class="na">language.name</span><span class="o">=</span><span class="s">日本語</span>
<span class="na">test.msg1</span><span class="o">=</span><span class="s">Languageの使い方</span>
<span class="na">test.msg2</span><span class="o">=</span><span class="s">{%0}が{%1}に{%2}を渡しました。</span>
</code></pre></div>
このとき、上の<code>$language</code>では
<div class="highlight"><pre><span></span><code><span class="x">$language-&gt;translateString(&quot;test.msg1&quot;) /* -&gt; &quot;Languageの使い方&quot; */;</span>
<span class="x">$language-&gt;translateString(&quot;test.msg2&quot;, [&quot;Steve&quot;, &quot;Alex&quot;, &quot;スコップ&quot;]) /* -&gt; &quot;SteveがAlexにスコップを渡しました。&quot;*/</span>
</code></pre></div>
のようになります。
これを利用して多言語対応を行うことができます。</p>
<p>なお、<code>Language</code>インスタンスの生成はファイルIOを伴うため、実用時には以下のような構成にすると良いでしょう。</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">exampleplugin</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">pocketmine\lang\Language</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">pocketmine\plugin\PluginBase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Webmozart\PathUtil\Path</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Loader</span> <span class="k">extends</span> <span class="nx">PluginBase</span><span class="p">{</span>

    <span class="sd">/** @var array&lt;string, Language&gt;*/</span>
    <span class="k">private</span> <span class="k">array</span> <span class="nv">$language</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">onLoad</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$path</span> <span class="o">=</span> <span class="nx">Path</span><span class="o">::</span><span class="na">join</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(),</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">);</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nx">Language</span><span class="o">::</span><span class="na">getLanguageList</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$lang</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">){</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getLogger</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s2">&quot;Language: </span><span class="si">$name</span><span class="s2"> is loaded&quot;</span><span class="p">);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Language</span><span class="p">(</span><span class="nv">$lang</span><span class="p">,</span> <span class="nv">$path</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getLanguage</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$lang</span><span class="o">=</span><span class="nx">Language</span><span class="o">::</span><span class="na">FALLBACK_LANGUAGE</span><span class="p">)</span><span class="o">:</span> <span class="nx">Language</span><span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">[</span><span class="nv">$lang</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></section><h1 class='nav-section-title-end'>Ended: プラグイン開発</h1>
                        <h1 class='nav-section-title' id='section-api4'>
                            API4 <a class='headerlink' href='#section-api4' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="api4-index"><h1 id="api4-index-api4">API4</h1>
<h2 id="api4-index-_1">インストールについて</h2>
<p>現在(2021.10.9) API4.0.0はベータ段階であり、安定版ではありません。テスト目的でのみ使用してください。
インストール方法は以下のページを参考にしてください。</p>
<ul>
<li><a href="https://qiita.com/bbo51dog/items/414b6270682f1a028bfe">https://qiita.com/bbo51dog/items/414b6270682f1a028bfe</a> (Ubuntu)</li>
<li><a href="#building-build-in-api4">API4でのサーバー構築</a></li>
</ul>
<h2 id="api4-index-_2">変更点のまとめ(鯖主向け)</h2>
<p>このセクションではAPI4での変更点をいくつかまとめて記述します。全訳は<a href="#api4-changelogs">API4 Changelogs全訳</a>より見られます。</p>
<h3 id="api4-index-_3">一般</h3>
<ul>
<li>セキュリティ・荒らし対策に関する変更点<ul>
<li>プラグインのホワイトリスト化・ブラックリスト化ができるようになります。</li>
<li>RCONやスポーンプロテクションはプラグインに代わりました。</li>
<li>プレイヤーのアンチ移動チートがなくなります。</li>
</ul>
</li>
<li>サーバーの動作に関する変更<ul>
<li>チャンク関連のPHP拡張が変更されました。binの変更が必要です。</li>
<li>リスポーン時のバグが修正されました。</li>
<li></li>
</ul>
</li>
</ul>
<h3 id="api4-index-_4">コマンド</h3>
<ul>
<li><code>/reload</code>コマンドが無くなりました</li>
<li><code>/effect</code>, <code>/enchant</code>コマンドは数字のIDは受け付けなくなり、英語のIDのみでしか使えません。</li>
<li><code>/gc</code>,<code>/status</code>,<code>/op</code>,<code>/deop</code>コマンドの表示が日本語化されるようになりました。</li>
</ul>
<h3 id="api4-index-pocketmineyml">設定 (<code>pocketmine.yml</code>)</h3>
<ul>
<li><code>pocketmine.yml</code>におけるワールドプリセットのキーが<code>generator</code>から<code>preset</code>に変更されました。</li>
<li>新たなオプションが使えるようになります<ul>
<li><code>chunk-ticking.blocks-per-subchunk-per-tick</code> サボテンの成長など、ブロックアップデートの確率</li>
<li><code>network.enable-encryption</code> pmmp&lt;-&gt;Minecraft間のパケットを暗号化するか否か</li>
</ul>
</li>
<li><code>chunk-ticking.light-updates</code>が削除されました。光処理なしにチャンクチックを進めることができなくなります。</li>
</ul>
<h3 id="api4-index-world">world関連</h3>
<ul>
<li>最初のワールド生成時にはスポーン生成がログに表示されるようになります。</li>
<li>バージョン1.12.xまでのMinecraft Bedrockのワールドがサポートされました。本家からワールドを持ってこれます。</li>
<li>非推奨となった<code>leveldb</code>以外のワールド形式は<code>leveldb</code>に変換されます。</li>
<li>建築高さ上限は256になりました。</li>
</ul>
<h3 id="api4-index-_5">パフォーマンス</h3>
<ul>
<li>保存方式が変わったことによりワールド保存が高速化されました。</li>
<li>爆発や光処理が軽くなりました。</li>
<li>パケット圧縮が高速化されました。ネットワーク全体の性能が向上します。</li>
</ul>
<h3 id="api4-index-_6">ロガーの刷新</h3>
<ul>
<li>多くのメッセージでプレフィックスが追加されました。</li>
<li>タイムスタンプがミリ秒まで含むようになります。</li>
</ul>
<h3 id="api4-index-_7">ネットワーク</h3>
<ul>
<li>デフォルトでパケットが暗号化されるようになります。</li>
<li>エラーチェックが実装されました。例外時にサーバーがクラッシュするようになります。</li>
<li><code>Internal server error</code>は削除されました。</li>
</ul>
<h2 id="api4-index-_8">開発者向け情報</h2>
<h3 id="api4-index-devtools-api4">DevTools API4対応版の配布場所</h3>
<p>poggit上でダウンロード可 <a href="https://poggit.pmmp.io/ci/pmmp/DevTools/PocketMine-DevTools">https://poggit.pmmp.io/ci/pmmp/DevTools/PocketMine-DevTools</a> の Build History:master により最新版がダウンロード可能</p></section><section class="print-page" id="api4-changelogs"><h1 id="api4-changelogs-api4-changelogs41">API4 Changelogs全訳(41%完了)</h1>
<h2 id="api4-changelogs-_1">訳に関して</h2>
<p><a href="https://github.com/pmmp/PocketMine-MP/blob/a3f8546ac442d6bbb44dfedc19eb6d3e639a50b6/changelogs/4.0.md">https://github.com/pmmp/PocketMine-MP/blob/a3f8546ac442d6bbb44dfedc19eb6d3e639a50b6/changelogs/4.0.md</a> 版より翻訳</p>
<p>翻訳漏れの無いように気を配りますが、書かれていない項目がある場合PRを送ってもらえると助かります。</p>
<h2 id="api4-changelogs-400-beta1">4.0.0-BETA1</h2>
<p>2021.9.7リリース
このメジャーバージョンAPI4は重要なAPIの変更,新しいワールド形式のサポート,パフォーマンスの向上やネットワークの刷新を含めたコア全体の重要な変更に焦点を当てています。</p>
<p>これはベータリリースであり、最終版でないことを注意してください。 現在からリリースまでに重大な変更はない予定ですがAPIはまだ変更される可能性があります。</p>
<p>さらに、このチェンジログはベストエフォートに基づいて提供されていて、すべての変更点が言及されていない可能性があることに注意してください。何か洩れがあった場合追加するためにプルリクエストをお願いします。(すなわち pmmp公式へ)</p>
<h3 id="api4-changelogs-_2">警告</h3>
<p>これは安定版リリースでは<strong>ありません</strong>。PMMPはこのビルドを使用したことによる損害のいかなる責任を負いません。
<strong>テスト</strong>目的にのみ使用してください。</p>
<h3 id="api4-changelogs-_3">コア</h3>
<h4 id="api4-changelogs-general">一般 General</h4>
<ul>
<li>"プラグイングレーリスト"機能が導入されます。ローディング時からプラグインをホワイトリスト化もしくはブラックリスト化することができます。</li>
<li>Remote Console (RCON) は削除されました。<a href="https://github.com/pmmp/RconServer">RconServer</a>プラグインが代わりに提供されます。</li>
<li>スポーンプロテクションは削除されました。<a href="https://github.com/pmmp/BasicSpawnProtection">BasicSpawnProtection</a>プラグインが代わりに提供されます。</li>
<li>Ctrl+Cシグナルハンドリングは削除されました。[PcnltSignalHandler]プラグインが代わりに提供されます。</li>
<li>プレイヤー移動アンチチートは削除されました。</li>
<li>GS4 QueryはRakLibが無効化されても停止されなくなりました。</li>
<li><code>pocketmine_chunkutils</code> PHP拡張は使われなくなりました。</li>
<li>新しいPHP拡張がこのバージョンから必要になりました。<ul>
<li><a href="https://github.com/pmmp/ext-chunkutils2">chunkutils2</a></li>
<li><a href="https://github.com/pmmp/ext-morton">morton</a></li>
</ul>
</li>
<li>プレイヤーリスポーン時の多くのバグが修正されました。<ul>
<li>生成されていない地形でリスポーンする際に岩盤下にスポーンするバグ</li>
<li>非常に遅いマシン上で初回サーバー参加時に岩盤下にスポーンするバグ</li>
<li>カスタムスポーン地点がセットされている状態でリスポーンしたときにブロック内(または上空)にスポーンするバグ</li>
<li>プレイヤースポーン地点がワールドスポーンが変わった時に以前の場所になってしまうバグ</li>
</ul>
</li>
<li>高い維持コストのわりに恩恵が少ないためプリプロセッサーはビルドから削除されました。現在、プリプロセッサー利用は非推奨です。</li>
</ul>
<h4 id="api4-changelogs-commands">コマンド Commands</h4>
<ul>
<li><code>/reload</code> コマンドは削除されました。</li>
<li><code>/effect</code> コマンドは数字IDをサポートしなくなりました。現在では名前が要求されます。</li>
<li><code>/enchant</code> コマンドは数学IDをサポートしなくなりました。現在では名前が要求されます。</li>
<li><code>/clear</code> コマンドが追加されました。バニラのMinecraftのものと機能的に同等のものです。</li>
<li>以下のコマンドの出力は選択した言語にローカライズされました。<ul>
<li><code>/gc</code></li>
<li><code>/status</code></li>
<li><code>/op</code></li>
<li><code>/deop</code></li>
</ul>
</li>
</ul>
<h4 id="api4-changelogs-configuration">設定 Configuration</h4>
<ul>
<li>ワールドのプリセットは<code>pocketmine.yml</code>の<code>preset</code>キーとして利用できるようになりました: 以前は<code>generator</code>キー</li>
<li>新たに以下のオプションが<code>pocketmine.yml</code>に追加されます<ul>
<li><code>chunk-ticking.blocks-per-subchunk-per-tick</code>(デフォルト <code>3</code>):この値を増加させるとランダムブロックアップデートの確率が上がります。(例. 草の成長)</li>
<li><code>network.enable-encryption</code>(デフォルト<code>true</code>): Minecraftネットワークパケットを暗号化するか否かを決定できます。</li>
</ul>
</li>
<li>以下のオプションが<code>pocketmine.yml</code>から削除されました。<ul>
<li><code>chunk-ticking.light-updates</code>: 光処理は基本的なバニラの機能を動作させるのに必要なため、チャンクチックを無効化することなくこの機能を停止することは意味がありません。もし、明るさ計算をしたくなければチャンクチックと共に無効化するようにしてください。</li>
<li><code>player.anti-cheat.allow-movement-cheats</code></li>
</ul>
</li>
</ul>
<h4 id="api4-changelogs-_4">ワールドハンドリング</h4>
<h5 id="api4-changelogs-_5">インターフェイス</h5>
<ul>
<li>最初のワールド生成時にスポーン地形チャンク生成の進度が表示されるようになりました。</li>
</ul>
<h5 id="api4-changelogs-_6">機能</h5>
<ul>
<li>1.12.xまでのMinecraft Bedrockのワールドがサポートされました。(1.13より上はまた別の形式変更によりまだ<strong>サポートされていません</strong>。対応には非常に労力を要します。)</li>
<li>非推奨のワールド形式の自動変換が実装されました。</li>
<li><code>leveldb</code>以外のすべての形式は非推奨となりました。以下のワールド形式は<strong>ロード時に自動的に新しい形式に変換されます</strong>:<ul>
<li><code>mcregion</code></li>
<li><code>anvil</code></li>
<li><code>pmanvil</code></li>
</ul>
</li>
<li>建築上限256はすべてのワールドでサポートされます。(自動変換により)</li>
<li>追加ブロックがサポートされます。(自動変換により)</li>
<li>光処理はディスク上に保存・ロードされなくなりました。</li>
<li>かわりに必要に応じてすぐに算出されます。これは以前からあった多くのバグを修正します。</li>
</ul>
<h5 id="api4-changelogs-_7">パフォーマンス</h5>
<ul>
<li><code>leveldb</code>は現在、基本のサポートされたワールド形式です。優れた設計により生来よりリージョンベース形式よりも高速です。</li>
<li>部分的なチャンク保存(変更されたチャンクの子要素のみを保存する)が実装されました。これによりチャンク保存時に書き込む必要のあるデータ量を徹底的に減らすことができます。また、同様に<strong>ワールド保存にかかる時間も徹底的に減らします</strong>。 これは<code>leveldb</code>ワールド形式のモジュール設計に可能になりました。リージョンベース形式ではこの強化はできません。</li>
<li>光処理はすべてのチャンクで利用可能であるとは限らなくなります。必要に応じてすぐに算出されます。</li>
<li><code>/op</code>, <code>/deop</code>, <code>/whitelist add</code> and <code>/whitelist remove</code> は理由なくプレイヤーデータを読み込まないようになりました。</li>
<li><code>Timings</code>はより正確なパフォーマンスメトリクスを収集するため<code>hrtime()</code>により提供される高精度なタイマーを使うようになります。</li>
<li>Z階数曲線(モートンコード)がブロックとチャンク座標のハッシュのために使用されます。これはハッシュテーブルキーハッシュ衝突問題を解決することにより広い範囲でパフォーマンスを非常に改善します。影響がある範囲には爆発や明るさ計算などを含みます。</li>
<li><a href="https://github.com/ebiggers/libdeflate"><code>libdeflate</code></a>が(オプションで)外方向へのMinecraftパケット圧縮に使用できます。これは多くのケースで<code>zlib</code>の2倍以上高速で、パケットブロードキャストとネットワーク全体の性能を向上させます。</li>
<li>クロージャーは現在内部イベントハンドラーの呼び出しのために使用されています。これにより3.xシステムよりも10-20%の性能向上ができます。3.xシステムはイベントコールのたびに動的にコーラブルを解決する必要がありました。</li>
</ul>
<h4 id="api4-changelogs-logger">Logger刷新</h4>
<ul>
<li>多くのコンポーネントは自動的にプレフィックスをメッセージに追加する専用のロガーを持つようになりました。</li>
<li>メインロガーはミリ秒のタイムスタンプを含むようになりました。</li>
</ul>
<h4 id="api4-changelogs-_8">ネットワーク</h4>
<p>このバージョンではネットワークシステムの重大な変更を組み込んでいます: コヒーレンシ、信頼性、モジュール性の向上をしました。</p>
<h5 id="api4-changelogs-minecraft-bedrock">Minecraft Bedrock パケット暗号化</h5>
<ul>
<li>これはハッカーがプレイヤーのログインを盗聴し利用することによる反射攻撃を防ぎます。</li>
<li>新たな設定<code>network.enable-encryption</code>が<code>pocketmine.yml</code>に追加されました。デフォルトでは<code>true</code>です。</li>
</ul>
<h5 id="api4-changelogs-_9">パケット受信エラーハンドリングが整備されました</h5>
<ul>
<li>今は<code>BadPacketException</code>のみがパケットのデコード、ハンドリング時にキャッチされます。これにはすべてのデコードが適切なエラーチェックを行うことが<strong>必須</strong>とされます。<ul>
<li>デコードで<code>BadPacketException</code>を投げるとプレイヤーは<code>Packet processing error</code>メッセージでキックされます。</li>
<li>切断メッセージにはサーバーオーナーがプレイヤーから報告された問題を特定しやすくするためのランダムな16進数IDが含まれます。</li>
</ul>
</li>
<li>そのほかの例外を投げるとサーバーはクラッシュします。<code>Internal server error</code>は削除されました。</li>
<li>現在ではサーバーに対するクライアント方向へのパケットの送信は不当なものになりました。これを行うとクライアントは<code>Unexpected non-serverbound packet</code>メッセージでキックされます。</li>
</ul>
<h5 id="api4-changelogs-_10">新たなパケットハンドラーシステム</h5>
<ul>
<li>パケットハンドラーはネットワークセッションから分離され、専用のパケットハンダラー構造に分かれました。</li>
<li>ネットワークセッションは正確に1つのハンドラーをその時点で持つことができます。ハンドラーは可変ありいつでも置き換えられます。これによりパケットハンドリングのロジックを複数のステージへと分離することができます。<ul>
<li>不正なタイミングで不正なパケットを送信することを防ぐ(今では何事もなくドロップされます)</li>
<li>一時的な状態固有のロジックの存在を許可する(例えばリソースパックのより厳格なダウンロードチェック)</li>
</ul>
</li>
<li>パケットハンドラーはほとんどいたるところで<code>Player</code>からなくなり、代わりにそのパケットハンドラー専用のユニットに存在しまるようになりました。</li>
<li>以前まで<code>Player</code>のパケットハンドラー内部に絡み合っていたほぼすべてのゲームロジックは新たなAPIメソッドへと展開されました。詳しくはPlayer APIの変更をご覧ください。</li>
</ul>
<h3 id="api4-changelogs-api">API</h3>
<h4 id="api4-changelogs-_11">一般</h4>
<ul>
<li>以前まで<code>callable</code>を許容していた大半の個所は、現在では<code>/Closure</code>のみを許可します。これはクロージャーがより一貫性のある振る舞いをして性能がより高いためです。</li>
<li><code>void</code>と<code>?nullable</code> パラメータおよび返り値の型指定は多くの箇所に適用されました。</li>
<li><code>pocketmine\metadeta</code>にあるすべてのものとそれに関連する実装は削除されました。</li>
</ul>
<h4 id="api4-changelogs-pluginyml"><code>plugin.yml</code>の変更</h4>
<h5 id="api4-changelogs-_12">パーミッションのネスト</h5>
<p>パーミッションのネストは<code>plugin.yml</code>内ではサポートされなくなりました。 <code>plugin.yml</code>内で(デフォルトにより)パーミッションのグループ化には、非常に混乱しやすく一貫性のないふるまいがありました。
ネストによるパーミッションの宣言の代わりに、宣言はそれぞればらばらになさなければならなりません。</p>
<p><em>Before</em>:
<div class="highlight"><pre><span></span><code>permissions:
    pmmp:
        default: op
children:
    pmmp.something:
        default: op
            pmmp.somethingElse:
                default: op
</code></pre></div></p>
<p><em>After</em>:
<div class="highlight"><pre><span></span><code>permissions:
    pmmp.something:
        default: op
    pmmp.somethingElse:
        default: op
</code></pre></div></p>
<h5 id="api4-changelogs-src-namespace-prefix"><code>src-namespace-prefix</code></h5>
<p>新しい指示文<code>src-namespace-prefix</code>が導入されます。これにより以下のようなプラグイン構造にある無駄なサブディレクトリを取り除くことができます。
例えば、以前では<code>pmmp\TesterPlugin\Main</code>がメインクラスであるようなプラグインはこのような構造でした。
<div class="highlight"><pre><span></span><code>|-- plugin.yml
|-- src/
    |-- pmmp/
        |-- TesterPlugin/
            |-- Main.php
            |-- SomeOtherClass.php
            |-- SomeNamespace/
                |-- SomeNamespacedClass.php
</code></pre></div>
しかし、<code>src-namespace-prefix:pmmp\TesterPlugin</code>を<code>plugin.yml</code>に付けくわえることで無駄なディレクトリを取り除き、このような構造にすることができます。
<div class="highlight"><pre><span></span><code>|-- plugin.yml
|-- src/
    |-- Main.php
    |-- SomeOtherClass.php
    |-- SomeNamespace/
        |-- SomeNamespacedClass.php
</code></pre></div></p>
<p><strong>ノート</strong>: 昔の構造でもちゃんと動きます。これは必ず変えなければならない変更ではありません。</p>
<h5 id="api4-changelogs-block">Block</h5>
<ul>
<li>新たに<code>VanillaBlocks</code>クラスが追加されました。このクラスは現在知られているどのブロックタイプでも生成できる静的メソッドを保有しています。 これは定数が使われている場合に<code>BlockFactory::get()</code>の代わりとしてしようされることが好ましいです。</li>
<li>ブロックは<code>Position</code>を継承するかわりにポジションを保有します。<code>Block-&gt;getBlockPosition()</code>が追加されました。</li>
<li>256以上のIDをもつブロックがサポートされました。</li>
<li>ブロックのステートとバリアントメタデータは分離されました。<ul>
<li>バリアントはIDの拡張と考えられ、不変です。(解説:これは回転や開閉といった状態を含まないことを表す)</li>
<li><code>Block-&gt;setDamage()</code>は削除されました。</li>
<li>すべてのブロックにはブロックプロパティ相応のゲッターとセッターが備わりました。例えば<code>facing</code> どの向きか,<code>lit/unlit</code> 着火/消火, <code>colour</code> 色などです。これらはメタデータの代わりに利用されるべきです。</li>
</ul>
</li>
<li>タイルエンティティは,タイルエンティティを必要とするブロックが<code>World-&gt;setBlock()</code>されたときに自動的に作成/削除されるようになります。</li>
<li>いくつかのタイルエンティティのAPIは,タイルエンティティが非推奨となると同時に対応する<code>Block</code>クラスで公開されるようになりました。</li>
<li>名前空間<code>pocketmine\tile</code>は<code>pocketmine\block\tile</code>に移動されました。</li>
<li><code>Block-&gt;recalculateBoundingBox()</code>と<code>Block-&gt;recalculateCollisionBoxes()</code>は自身の位置基準ではなく<code>0,0,0</code>に基準のAABBsを返すようになります。</li>
<li>ブロックの破壊情報は新しい動的な<code>BlockBreakInfo</code>ユニットへと展開されました。以下のメソッドが移動されます。<ul>
<li><code>Block-&gt;getBlastResistance()</code> -&gt; <code>BlockBreakInfo-&gt;getBlastResistance()</code></li>
<li><code>Block-&gt;getBreakTime()</code> -&gt; <code>BlockBreakInfo-&gt;getBreakTime()</code></li>
<li><code>Block-&gt;getHardness()</code> -&gt; <code>BlockBreakInfo-&gt;getHardness()</code></li>
<li><code>Block-&gt;getToolHarvestLevel()</code> -&gt; <code>BlockBreakInfo-&gt;getToolHarvestLevel()</code></li>
<li><code>Block-&gt;getToolType()</code> -&gt; <code>BlockBreakInfo-&gt;getToolType()</code></li>
<li><code>Block-&gt;isBreakable()</code> -&gt; <code>BlockBreakInfo-&gt;isBreakable()</code></li>
<li><code>Block-&gt;isCompatibleWithTool()</code> -&gt; <code>BlockBreakInfo-&gt;isToolCompatible()</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Block-&gt;asItem()</code>: ブロックに対応するアイテムスタックを返す。</li>
<li><code>Block-&gt;isSameState()</code>: ステート情報を含めてブロックが同じパラメータであるかを返す。</li>
<li><code>Block-&gt;isSameType()</code>: ステート情報を含めずにブロックが同じパラメータであるかを返す。</li>
<li><code>Block-&gt;isFullCube()</code></li>
</ul>
</li>
<li>以下のフックが追加されました。<ul>
<li><code>Block-&gt;onAttack()</code>: サバイバルモードのプレイヤーがブロックを左クリックしブロックの破壊をし始めた時に呼ばれる。</li>
<li><code>Block-&gt;onEntityLand()</code>: エンティティが(高さによらず)落下後にブロック上に乗ったときに呼ばれる。</li>
<li><code>Block-&gt;onPostPlace()</code>: ワールドにおかれた直後に呼ばれ、レール接続やチェストの連結をハンドルする。</li>
</ul>
</li>
<li>以下のAPIメソッドがリネームされました。<ul>
<li><code>Block-&gt;getDamage()</code> -&gt; <code>Block-&gt;getMeta()</code></li>
<li><code>Block-&gt;onActivate()</code> -&gt; <code>Block-&gt;onInteract()</code></li>
<li><code>Block-&gt;onEntityCollide()</code> -&gt; <code>Block-&gt;onEntityInside()</code></li>
</ul>
</li>
<li>以下のAPIメソッドはシグネチャが変わりました。<ul>
<li><code>Block-&gt;onInteract()</code> は現在ではシグネチャ <code>onInteract(Item $item, int $face, Vector3 $clickVector, ?Player $player = null) : bool</code> を持ちます。</li>
<li><code>Block-&gt;getCollisionBoxes()</code> はファイナルになりました。 子クラスは<code>recalculateCollisionBoxes()</code>をオーバーライドするべきです。</li>
</ul>
</li>
<li>以下のAPIメソッドは削除されました。<ul>
<li><code>Block-&gt;canPassThrough()</code></li>
<li><code>Block-&gt;setDamage()</code></li>
<li><code>Block::get()</code>: これはずいぶん前に <code>BlockFactory::get()</code>に置き換えられています。</li>
<li><code>Block-&gt;getBoundingBox()</code></li>
</ul>
</li>
<li>以下のクラスはリネームされました。<ul>
<li><code>BlockIds</code> -&gt; <code>BlockLegacyIds</code></li>
<li><code>CobblestoneWall</code> -&gt; <code>Wall</code></li>
<li><code>NoteBlock</code> -&gt; <code>Note</code></li>
<li><code>SignPost</code> -&gt; <code>Sign</code></li>
<li><code>StandingBanner</code> -&gt; <code>Banner</code></li>
</ul>
</li>
<li>以下のクラスは削除されました。<ul>
<li><code>Bricks</code></li>
<li><code>BurningFurnace</code></li>
<li><code>CobblestoneStairs</code></li>
<li><code>Dandelion</code></li>
<li><code>DoubleSlab</code></li>
<li><code>DoubleStoneSlab</code></li>
<li><code>EndStone</code></li>
<li><code>GlowingRedstoneOre</code></li>
<li><code>GoldOre</code></li>
<li><code>Gold</code></li>
<li><code>IronDoor</code></li>
<li><code>IronOre</code></li>
<li><code>IronTrapdoor</code></li>
<li><code>Iron</code></li>
<li><code>Lapis</code></li>
<li><code>NetherBrickFence</code></li>
<li><code>NetherBrickStairs</code></li>
<li><code>Obsidian</code></li>
<li><code>PurpurStairs</code></li>
<li><code>Purpur</code></li>
<li><code>QuartzStairs</code></li>
<li><code>Quartz</code></li>
<li><code>RedSandstoneStairs</code></li>
<li><code>RedSandstone</code></li>
<li><code>SandstoneStairs</code></li>
<li><code>Sandstone</code></li>
<li><code>StainedClay</code></li>
<li><code>StainedGlassPane</code></li>
<li><code>StainedGlass</code></li>
<li><code>StoneBrickStairs</code></li>
<li><code>StoneBricks</code></li>
<li><code>StoneSlab2</code></li>
<li><code>StoneSlab</code></li>
<li><code>Stone</code></li>
<li><code>WallBanner</code></li>
<li><code>WallSign</code></li>
<li><code>Wood2</code></li>
</ul>
</li>
<li><code>BlockToolType</code>の定数は<code>TYPE_</code>プレフィックスを削除する形でリネームされました。</li>
</ul>
<h4 id="api4-changelogs-command">Command</h4>
<ul>
<li>以下のクラスは削除されました。<ul>
<li><code>RemoteConsoleCommandSender</code></li>
</ul>
</li>
<li>以下のAPIメソッドはシグネチャが変わりました。<ul>
<li><code>Command-&gt;setPermission()</code> nullableではありますが、引数が必須になりました</li>
<li><code>CommandSender-&gt;setScreenLineHeight()</code> nullableではありますが、引数が必須になりました</li>
</ul>
</li>
<li>名前に空白を含むコマンドはサポートされなくなりました</li>
</ul>
<h4 id="api4-changelogs-entity">Entity</h4>
<h5 id="api4-changelogs-_13">一般</h5>
<ul>
<li><code>Entity</code>は<code>Location</code>を継承しなくなります。 代わりに<code>Entity-&gt;getLocation()</code>や<code>Entity-&gt;getPosition()</code>を使ってください。</li>
<li>以下のフィールドは削除されました。<ul>
<li><code>Entity-&gt;chunk</code>: エンティティはどのチャンクにいるのかを自身では記憶しなくなりました (かわりに<code>World</code>がそれを管理します)。</li>
<li><code>Entity-&gt;height</code>: <code>EntitySizeInfo</code>に移動しました。 代わりに<code>Entity-&gt;size</code>を使ってください。</li>
<li><code>Entity-&gt;width</code>: <code>EntitySizeInfo</code>に移動しました。 代わりに<code>Entity-&gt;size</code>を使ってください。</li>
<li><code>Entity-&gt;eyeHeight</code>: <code>EntitySizeInfo</code>に移動しました。 代わりに <code>Entity-&gt;size</code>を使ってください。</li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Entity-&gt;getFallDistance()</code></li>
<li><code>Entity-&gt;setFallDistance()</code></li>
<li><code>ItemEntity-&gt;getDespawnDelay()</code></li>
<li><code>ItemEntity-&gt;setDespawnDelay()</code></li>
<li><code>Living-&gt;calculateFallDamage()</code>: これは<code>protected</code>です。 サブクラスにより、これをオーバーライドすることでダメージロジックをカスタマイズできます。</li>
<li><code>Human-&gt;getHungerManager()</code></li>
<li><code>Human-&gt;getXpManager()</code></li>
</ul>
</li>
<li>以下のAPIメソッドはシグネチャが変わりました。<ul>
<li><code>Entity-&gt;entityBaseTick()</code>は<code>protected</code>になりました。</li>
<li><code>Entity-&gt;move()</code>は<code>protected</code>になりました。</li>
<li><code>Entity-&gt;setPosition()</code>は<code>protected</code>になりました。 (代わりに <code>Entity-&gt;teleport()</code>を使ってください).</li>
<li><code>Entity-&gt;setPositionAndRotation()</code>は<code>protected</code> (代わりに<code>Entity-&gt;teleport()</code>を使ってください).</li>
<li><code>Living-&gt;knockBack()</code>は<code>float, float, float</code>を受け入れるようになりました。 (最初の２つのパラメーターは削除されました).</li>
<li><code>Living-&gt;getEffects()</code>は<code>Effect[]</code>の代わりに<code>EffectManager</code>を返すようになりました。</li>
</ul>
</li>
<li>以下のクラスは追加されました。<ul>
<li><code>effect\EffectManager</code>: <code>Living</code>から展開されたエフェクト管理の機能群を保持します。</li>
<li><code>HungerManager</code>: <code>Human</code>から展開された空腹管理の機能群を保持します。</li>
<li><code>ExperienceManager</code>: <code>Human</code>から展開された経験値管理の機能群を保持します。</li>
</ul>
</li>
<li>以下のAPIメソッドは移動、またはリネームされました。<ul>
<li><code>Entity-&gt;fall()</code> -&gt; <code>Entity-&gt;onHitGround()</code> (また、アクセス権が<code>public</code>から<code>protected</code>になりました。)</li>
<li><code>Living-&gt;removeAllEffects()</code> -&gt; <code>EffectManager-&gt;clear()</code></li>
<li><code>Living-&gt;removeEffect()</code> -&gt; <code>EffectManager-&gt;remove()</code></li>
<li><code>Living-&gt;addEffect()</code> -&gt; <code>EffectManager-&gt;add()</code></li>
<li><code>Living-&gt;getEffect()</code> -&gt; <code>EffectManager-&gt;get()</code></li>
<li><code>Living-&gt;hasEffect()</code> -&gt; <code>EffectManager-&gt;has()</code></li>
<li><code>Living-&gt;hasEffects()</code> -&gt; <code>EffectManager-&gt;hasEffects()</code></li>
<li><code>Living-&gt;getEffects()</code> -&gt; <code>EffectManager-&gt;all()</code></li>
<li><code>Human-&gt;getFood()</code> -&gt; <code>HungerManager-&gt;getFood()</code></li>
<li><code>Human-&gt;setFood()</code> -&gt; <code>HungerManager-&gt;setFood()</code></li>
<li><code>Human-&gt;getMaxFood()</code> -&gt; <code>HungerManager-&gt;getMaxFood()</code></li>
<li><code>Human-&gt;addFood()</code> -&gt; <code>HungerManager-&gt;addFood()</code></li>
<li><code>Human-&gt;isHungry()</code> -&gt; <code>HungerManager-&gt;isHungry()</code></li>
<li><code>Human-&gt;getSaturation()</code> -&gt; <code>HungerManager-&gt;getSaturation()</code></li>
<li><code>Human-&gt;setSaturation()</code> -&gt; <code>HungerManager-&gt;setSaturation()</code></li>
<li><code>Human-&gt;addSaturation()</code> -&gt; <code>HungerManager-&gt;addSaturation()</code></li>
<li><code>Human-&gt;getExhaustion()</code> -&gt; <code>HungerManager-&gt;getExhaustion()</code></li>
<li><code>Human-&gt;setExhaustion()</code> -&gt; <code>HungerManager-&gt;setExhaustion()</code></li>
<li><code>Human-&gt;exhaust()</code> -&gt; <code>HungerManager-&gt;exhaust()</code></li>
<li><code>Human-&gt;getXpLevel()</code> -&gt; <code>ExperienceManager-&gt;getXpLevel()</code></li>
<li><code>Human-&gt;setXpLevel()</code> -&gt; <code>ExperienceManager-&gt;setXpLevel()</code></li>
<li><code>Human-&gt;addXpLevels()</code> -&gt; <code>ExperienceManager-&gt;addXpLevels()</code></li>
<li><code>Human-&gt;subtractXpLevels()</code> -&gt; <code>ExperienceManager-&gt;subtractXpLevels()</code></li>
<li><code>Human-&gt;getXpProgress()</code> -&gt; <code>ExperienceManager-&gt;getXpProgress()</code></li>
<li><code>Human-&gt;setXpProgress()</code> -&gt; <code>ExperienceManager-&gt;setXpProgress()</code></li>
<li><code>Human-&gt;getRemainderXp()</code> -&gt; <code>ExperienceManager-&gt;getRemainderXp()</code></li>
<li><code>Human-&gt;getCurrentTotalXp()</code> -&gt; <code>ExperienceManager-&gt;getCurrentTotalXp()</code></li>
<li><code>Human-&gt;setCurrentTotalXp()</code> -&gt; <code>ExperienceManager-&gt;setCurrentTotalXp()</code></li>
<li><code>Human-&gt;addXp()</code> -&gt; <code>ExperienceManager-&gt;addXp()</code></li>
<li><code>Human-&gt;subtractXp()</code> -&gt; <code>ExperienceManager-&gt;subtractXp()</code></li>
<li><code>Human-&gt;getLifetimeTotalXp()</code> -&gt; <code>ExperienceManager-&gt;getLifetimeTotalXp()</code></li>
<li><code>Human-&gt;setLifetimeTotalXp()</code> -&gt; <code>ExperienceManager-&gt;setLifetimeTotalXp()</code></li>
<li><code>Human-&gt;canPickupXp()</code> -&gt; <code>ExperienceManager-&gt;canPickupXp()</code></li>
<li><code>Human-&gt;onPickupXp()</code> -&gt; <code>ExperienceManager-&gt;onPickupXp()</code></li>
<li><code>Human-&gt;resetXpCooldown()</code> -&gt; <code>ExperienceManager-&gt;resetXpCooldown()</code></li>
</ul>
</li>
<li>以下のAPIメソッドは削除されました。<ul>
<li><code>Human-&gt;getRawUniqueId()</code>は、代わりに<code>Human-&gt;getUniqueId()-&gt;toBinary()</code>を使うようになりました。</li>
</ul>
</li>
<li>以下のクラスは削除されました。<ul>
<li><code>Creature</code></li>
<li><code>Damageable</code></li>
<li><code>Monster</code></li>
<li><code>NPC</code></li>
<li><code>Rideable</code></li>
<li><code>Vehicle</code></li>
</ul>
</li>
<li><code>Skin</code>無効なデータを受け取ると例外を投げるようになりました。</li>
</ul>
<h5 id="api4-changelogs-effect">Effect</h5>
<ul>
<li>全ての<code>Effect</code>に関連したクラスは<code>pocketmine\entity\effect</code>の名前空間に移動しました。</li>
<li><code>Effect</code>クラスに入っていたエフェクト機能はいくつかのクラスに分けられました。以下のクラスが新しく追加されました。<ul>
<li><code>AbsorptionEffect</code></li>
<li><code>HealthBoostEffect</code></li>
<li><code>HungerEffect</code></li>
<li><code>InstantDamageEffect</code></li>
<li><code>InstantEffect</code></li>
<li><code>InstantHealthEffect</code></li>
<li><code>InvisibilityEffect</code></li>
<li><code>LevitationEffect</code></li>
<li><code>PoisonEffect</code></li>
<li><code>RegenerationEffect</code></li>
<li><code>SaturationEffect</code></li>
<li><code>SlownessEffect</code></li>
<li><code>SpeedEffect</code></li>
<li><code>WitherEffect</code></li>
</ul>
</li>
<li><code>VanillaEffects</code>クラスが追加されました。これは全てのバニラエフェクトタイプを静的メソッドで表現し、<code>Effect::getEffect()</code>よりもきれいに書けるようになります。<ul>
<li>例: <code>Effect::getEffect(Effect::NIGHT_VISION)</code>は<code>VanillaEffects::NIGHT_VISION()</code>に置き換えることができます。</li>
</ul>
</li>
<li>エフェクトの強さ(amplifiers)を負の値にすることは現在では明確に禁止されます。エフェクトの生み出す効果が定義されていないためです。</li>
<li>MCPEのエフェクトIDとPocketMine-MP内部のIDの境目がより明確になりました。<ul>
<li>IDハンドリングは<code>pocketmine\data\bedrock\EffectIdMap</code>へ移動しました。</li>
<li>すべてのエフェクトID定数は<code>Effect</code>から削除されました。何らかの理由でレガシーエフェクトIDが必要なら<code>pocketmine\data\bedrock\EffectIds</code>を利用してください。</li>
</ul>
</li>
<li>以下のAPIメソッドは移動しました。<ul>
<li><code>Effect-&gt;getId()</code> -&gt; <code>EffectIdMap-&gt;toId()</code></li>
<li><code>Effect::registerEffect()</code> -&gt; <code>EffectIdMap-&gt;register()</code></li>
<li><code>Effect::getEffect()</code> -&gt; <code>EffectIdMap-&gt;fromId()</code></li>
<li><code>Effect::getEffectByName()</code> -&gt; <code>VanillaEffects::fromString()</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Effect-&gt;getRuntimeId()</code>: これは<strong>動的ID</strong>でありエフェクトタイプの比較に用いることができます。<strong>これは決して保持されないため、configやNBTでは利用しないでください！</strong></li>
</ul>
</li>
</ul>
<h5 id="api4-changelogs-nbt">実行時エンティティNBTの削除</h5>
<ul>
<li>エンティティは実行時にNBTを存在させ続けなくなりました。<ul>
<li><code>Entity-&gt;namedtag</code>は削除されました。</li>
<li><code>Entity-&gt;saveNBT()</code>はその場で前のNBTに変更を加えるのではなく、現在では新規生成された<code>CompoundTag</code>を返すようになりました。</li>
<li><code>Entity-&gt;initEntity()</code>は現在では<code>CompoundTag</code>パラメータを受け付けます。</li>
</ul>
</li>
</ul>
<h5 id="api4-changelogs-_14">エンティティ生成</h5>
<ul>
<li><code>Entity::createEntity()</code>は削除されました。もはや実行時に新たなエンティティを生成するためには必要なくなりました。代わりに、単に<code>new YourEntity</code>のようにしてください。</li>
<li><code>Entity</code>の子クラスのコンストラクタは普通のクラスと同様にどのようなシグネチャでも持つことができます。</li>
<li>NBTからのエンティティの読み込みは現在では<code>EntityFactory</code>にハンドルされるようになりました。<code>Entity::createEntity()</code>の動作とはかなり違った動作をします。 <code>YourEntity::class</code>を一式のMinecraft save IDに登録する代わりに、 あるNBTと<code>World</code>が与えられたときにエンティティを構築するコールバックを与える必要があります。<ul>
<li>生成コールバックは<code>EntityFactory::register()</code>を用いて登録されます。</li>
<li>生成コールバックはシグネチャ<code>function(World, CompoundTag) : Entity</code>を持つ必要があります。</li>
<li>これにより<code>Entity</code>の子クラスはそれぞれにふさわしいコンストラクタ引数を持てるようになりました。</li>
<li>また、特定のデータが常に与えられるように要求することも可能になります。(例えば、<code>FallingBlock</code>をどの種類のブロックかを指定することなく生成するというのは理解できません。)</li>
<li>例:<ul>
<li><code>ItemEntity</code>は現在では<code>Item</code>をコンストラクタで要求するようになりました。そのため、生成コールバックは<code>Item</code>をコンストラクタに渡されたNBTからデコードするものです。</li>
<li><code>Painting</code>は現在では<code>PaintingMotive</code>をコンストラクタで要求するようになりました。そのため、生成コールバックはどの<code>PaintingMotive</code>を与えるべきかを受け取ったNBTに応じて決定するものです。</li>
<li>さらなる例は<code>EntityFactory</code>をご覧ください。</li>
</ul>
</li>
</ul>
</li>
<li><code>EntityFactory::register()</code>(以前の<code>Entity::registerEntity()</code>)はエラー発生時に<code>false</code>のかわりに例外を投げるようになりました。</li>
<li>以下のAPIメソッドが移動しました。<ul>
<li><code>Entity::registerEntity()</code> -&gt; <code>EntityFactory::register()</code></li>
</ul>
</li>
<li>以下のクラスはコンストラクタが変更されました。<ul>
<li>すべての発射物の子クラスは現在では<code>?Entity $thrower</code>パラメータを必要とします。</li>
<li><code>Arrow-&gt;__construct()</code>は現在では<code>bool $critical</code> パラメータを必要とします。</li>
<li><code>ExperienceOrb-&gt;__construct()</code>は現在では<code>int $xpValue</code>パラメータを必要とします。</li>
<li><code>FallingBlock-&gt;__construct()</code>は現在では<code>Block $block</code>パラメータを必要とします。</li>
<li><code>ItemEntity-&gt;__construct()</code>は現在では<code>Item $item</code>パラメータを必要とします。</li>
<li><code>Painting-&gt;__construct()</code>は現在では<code>PaintingMotive $motive</code>を必要とします。</li>
<li><code>SplashPotion-&gt;__construct()</code>は現在では<code>int $potionId</code>を必要とします。</li>
</ul>
</li>
<li>以下のAPIメソッドは削除されました。<ul>
<li><code>Entity::createBaseNBT()</code>: <code>new YourEntity</code>と適切なAPIメソッドが利用されるべきです。</li>
<li><code>Entity-&gt;getSaveId()</code></li>
<li><code>Entity::getKnownEntityTypes()</code></li>
<li><code>Entity::createEntity()</code>: <code>new YourEntity</code>をかわりに利用してください。 </li>
</ul>
</li>
</ul>
<h5 id="api4-changelogs-_15">やりかけ エンティティのネットワークメタデータの削除</h5>
<ul>
<li>定数に関するすべてのネットワークメタデータは<code>Entity</code>クラスから削除され、プロトコル層へ移動されました。これはネットワークメタデータをAPIから全体的に削除することを意図していますが、完了はしていません。<ul>
<li>定数<code>Entity::DATA_FLAG_*</code>は<code>pocketmine\network\mcpe\protocol\types\entity\EntityMetadataFlags</code>に移動されました。</li>
<li>定数<code>Entity::DATA_TYPE_*</code>は<code>pocketmine\network\mcpe\protocol\types\entity\EntityMetadataTypes</code>に移動されました。</li>
<li>定数<code>Entity::DATA_*</code>は<code>pocketmine\network\mcpe\protocol\types\entity\EntityMetadataProperties</code>に移動されました。</li>
</ul>
</li>
<li><code>DataPropertyManager</code>は 名前空間<code>pocketmine\network\mcpe\protocol\types\entity</code>に移動され、したがってAPIの一部ではないものとして扱われます。</li>
<li>導入された内部の<code>Entity</code>は<code>syncNetworkData()</code>をフックします。この関数はエンティティのプロパティをエンティティはエンティティのネットワークデータセット同期することが期待されます。</li>
<li>内部のエンティティのプロパティを保存するためのネットワークメタデータセットの内部利用は削除されました。エンティティは現在では正規のクラスプロパティを使用し、ネットワークデータセットを同期することが期待されます。</li>
<li><code>Entity-&gt;propertyManager</code>は<code>Entity-&gt;networkProperties</code>にリネームされました。</li>
<li><code>Entity-&gt;getDataPropertyManager()</code>は<code>Entity-&gt;getNetworkProperties()</code>にリネームされました。</li>
</ul>
<h4 id="api4-changelogs-event">Event</h4>
<h5 id="api4-changelogs-listener">内部イベントシステムにおける<code>Listener</code>依存の排除</h5>
<ul>
<li>内部イベント処理システムは<code>Listener</code>オブジェクトに依存しなくなりました。ハンドラーになるための標準要求さえ満たせば任意のクロージャーが利用できます。<ul>
<li>この変更により、イベントハンドラーの呼び出し性能が15%程改善されます。プラグインが行っていることは何も含まれません。</li>
<li>以下のクラスが削除されました。<ul>
<li><code>pocketmine\plugin\EventExecutor</code></li>
<li><code>pocketmine\plugin\MethodEventExecutor</code></li>
</ul>
</li>
<li><code>RegisteredListener-&gt;__construct()</code>は先頭のパラメータとして<code>Listener, EventExecutor</code>の代わりに<code>Closure</code>を必要とします。</li>
<li><code>RegisteredListener-&gt;getListener()</code>は削除されました。</li>
</ul>
</li>
</ul>
<h5 id="api4-changelogs-_16">デフォルトのキャンセルハンドリングの振る舞いの変化</h5>
<ul>
<li>ハンドラー関数は<strong>デフォルトではキャンセルされたイベントを受け取らなくなります</strong>。 これは<strong>静かに後方互換性を損なうもの</strong>であり、すなわち直接エラーを吐くことはなくともバグを引き起こす可能性があります。</li>
<li><code>@ignoreCancelled</code>は無視されるようになりました。</li>
<li><code>@handleCancelled</code>が追加されました。これを用いるとキャンセルされたイベントを <em>受け取る</em> ことができるようになります。(<code>@ignoreCancelled</code>の反対です)</li>
</ul>
<h5 id="api4-changelogs-playerpreloginevent"><code>PlayerPreLoginEvent</code>の変更</h5>
<ul>
<li><code>Player</code>オブジェクトはログインのこのフェーズでは存在しなくなりました。代わりに<code>PlayerInfo</code>オブジェクトが接続情報とともに与えられます。</li>
<li>Ban、サーバーの満員、ホワイトリストの確認は<code>PlayerPreLoginEvent</code>に一元化されます。もはやこの手の切断をハンドルするために<code>PlayerKickEvent</code>に介入する必要はなくなるとともに、介入することはできなくなりました。<ul>
<li>複数のキック理由を使用すると、他にプレイヤーを切断する理由があって内一つが除外されたときにもプレイヤーを確実に切断することができます。例えばあるプレイヤーがBanされていてサーバーが満員であったとすると、Banフラグを除外してもサーバーが満員であることからプレイヤーはそれでも切断されます。</li>
<li>プラグインはカスタムのキック理由をセットできます。どの理由も絶対的な優先度を持ちます。</li>
<li>もし複数のフラグがセットされていた場合、キックメッセージには最も優先度が高いものが表示されます。優先度(このスナップショットにおいて)は下記の順に続きます。<ul>
<li>カスタム (最優先)</li>
<li>満員</li>
<li>ホワイトリスト</li>
<li>Ban</li>
</ul>
</li>
</ul>
</li>
<li><code>PlayerPreLoginEvent::KICK_REASON_PRIORITY</code>定数は高いほうが先にくるキック理由の優先度のリストを保持します。</li>
<li>以下の定数が追加されました<ul>
<li><code>PlayerPreLoginEvent::KICK_REASON_PLUGIN</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_SERVER_FULL</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_SERVER_WHITELISTED</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_BANNED</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_PRIORITY</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>PlayerPreLoginEvent-&gt;clearAllKickReasons()</code></li>
<li><code>PlayerPreLoginEvent-&gt;clearKickReason()</code></li>
<li><code>PlayerPreLoginEvent-&gt;getFinalKickMessage()</code>: 現在の理由リストでプレイヤーに表示されるメッセージ</li>
<li><code>PlayerPreLoginEvent-&gt;getIp()</code></li>
<li><code>PlayerPreLoginEvent-&gt;getKickReasons()</code>: キック理由を示すフラグの配列, 参加できる時には空</li>
<li><code>PlayerPreLoginEvent-&gt;getPlayerInfo()</code></li>
<li><code>PlayerPreLoginEvent-&gt;getPort()</code></li>
<li><code>PlayerPreLoginEvent-&gt;isAllowed()</code></li>
<li><code>PlayerPreLoginEvent-&gt;isAuthRequired()</code>: XBL認証が強制されているか</li>
<li><code>PlayerPreLoginEvent-&gt;isKickReasonSet()</code></li>
<li><code>PlayerPreLoginEvent-&gt;setAuthRequired()</code></li>
<li><code>PlayerPreLoginEvent-&gt;setKickReason()</code></li>
</ul>
</li>
<li>以下のAPIメソッドは変更されました。<ul>
<li><code>PlayerPreLoginEvent-&gt;getKickMessage()</code>は現在ではシグネチャ<code>getKickMessage(int $flag) : ?string</code>を持ちます。</li>
</ul>
</li>
<li>以下のAPIメソッドは削除されました。<ul>
<li><code>PlayerPreLoginEvent-&gt;setKickMessage()</code></li>
<li><code>PlayerPreLoginEvent-&gt;getPlayer()</code></li>
</ul>
</li>
<li>以下のAPIメソッドは移動/リネームされました。<ul>
<li><code>InventoryPickupItemEvent-&gt;getItem()</code> -&gt; <code>InventoryPickupItemEvent-&gt;getItemEntity()</code></li>
</ul>
</li>
</ul>
<h5 id="api4-changelogs-_17">その他の変更</h5>
<ul>
<li>イベントの間にプレイヤーが切断されてもサーバーはクラッシュしなくなりました。(それでも他の副作用を引き起こす可能性があります)</li>
<li><code>PlayerKickEvent</code>は最初のログインシークエンスが完了する以前に発生した切断では着火されなくなりました。(例 リソースパックのダウンロード完了時)</li>
<li>キャンセル可能なイベントはインターフェースの要件を満たすために必要なキャンセル可能なコンポーネントを得るための<code>CancellableTrait</code>を実装する必要があります。<code>Event</code>はこれらのメソッドをスタブを持たなくなりました。</li>
<li><code>PlayerInteractEvent</code>はプレイヤーがアイテムをアクティベートしたときに着火されなくなりました。これは古くからの問題であった<code>PlayerInteractEvent</code>が一回触った時にも繰り返し発火されてしまう問題を修正します。以下の定数は削除されました。<ul>
<li><code>PlayerInteractEvent::LEFT_CLICK_AIR</code></li>
<li><code>PlayerInteractEvent::RIGHT_CLICK_AIR</code></li>
<li><code>PlayerInteractEvent::PHYSICAL</code></li>
</ul>
</li>
<li>以下のイベントが追加されます。<ul>
<li><code>PlayerEntityInteractEvent</code>: プレイヤーがエンティティを右クリック(スマホでは長押し)した時のイベント</li>
<li><code>PlayerItemUseEvent</code>: プレイヤーが持っているアイテムをアクティベートした時のイベント, 例えば雪玉を投げるなど。</li>
<li><code>BlockTeleportEvent</code>: ブロックがテレポートした時のイベント、例えばエンドラの卵が攻撃されたときなど。</li>
<li><code>PlayerDisplayNameChangeEvent</code></li>
<li><code>EntityItemPickupEvent</code>: プレイヤーやエンティティが落ちているアイテム(か矢)を拾った時のイベント。 <code>InventoryPickupItemEvent</code>と<code>InventoryPickupArrowEvent</code>の置き換え<ul>
<li>置き換え前とは違って、アイテムが入るインベントリを変更することができます。</li>
<li>もし入るインベントリを<code>null</code>にすると、アイテムは破棄されます。これはインベントリが満杯の状態でクリエイティブのプレイヤーが拾うときに見られる動作です。</li>
</ul>
</li>
<li><code>EntityTrampleFarmlandEvent</code>: 農地上でmobやプレイヤーがジャンプをして土に変化させるときのイベント。</li>
<li><code>StructureGrowEvent</code>: 木や竹、その他の複数ブロックの苗木構造物が成長するときに呼ばれます。</li>
</ul>
</li>
<li>以下のイベントは削除されました。<ul>
<li><code>EntityArmorChangeEvent</code></li>
<li><code>EntityInventoryChangeEvent</code></li>
<li><code>EntityLevelChangeEvent</code> - <code>EntityTeleportEvent</code>にてワールドの確認をすることで代用してください。</li>
<li><code>InventoryPickupItemEvent</code> - <code>EntityItemPickupEvent</code>を代わりに使用してください。</li>
<li><code>InventoryPickupArrowEvent</code> - <code>EntityItemPickupEvent</code>を代わり使用してください。</li>
<li><code>NetworkInterfaceCrashEvent</code></li>
<li><code>PlayerCheatEvent</code></li>
<li><code>PlayerIllegalMoveEvent</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>EntityDeathEvent-&gt;getXpDropAmount()</code></li>
<li><code>EntityDeathEvent-&gt;setXpDropAmount()</code></li>
<li><code>PlayerDeathEvent-&gt;getXpDropAmount()</code></li>
<li><code>PlayerDeathEvent-&gt;setXpDropAmount()</code></li>
</ul>
</li>
<li>以下のメソッドは削除されました。<ul>
<li><code>PlayerPreLoginEvent-&gt;getPlayer()</code></li>
<li><code>Cancellable-&gt;setCancelled()</code>: これにより<code>Cancellable</code>実装はそのイベント特有のキャンセル機構を実装できるようになりました。例えば<code>PlayerPreLoginEvent</code>における複雑な機構などです。</li>
</ul>
</li>
<li>以下のAPIメソッドは移動されました。<ul>
<li><code>Event-&gt;isCancelled()</code> -&gt; <code>CancellableTrait-&gt;isCancelled()</code>: これはクラスが<code>Cancellable</code>を実装していなかった場合に<code>BadMethodCallException</code>を投げるスタブでした。これは現在ではキャンセル不可能なイベントでは単に使えなくなっています。</li>
<li><code>Event-&gt;setCancelled()</code>は<code>cancel()</code>と<code>uncancel()</code>に分割され、<code>CancellableTrait</code>に移動しました。</li>
<li><code>HandlerList::unregisterAll()</code> -&gt; <code>HandlerListManager-&gt;unregisterAll()</code></li>
<li><code>HandlerList::getHandlerListFor()</code> -&gt; <code>HandlerListManager-&gt;getListFor()</code></li>
<li><code>HandlerList::getHandlerLists()</code> -&gt; <code>HandlerListManager-&gt;getAll()</code></li>
</ul>
</li>
<li>以下のクラスは移動しました。<ul>
<li><code>pocketmine\plugin\RegisteredListener</code> -&gt; <code>pocketmine\event\RegisteredListener</code></li>
</ul>
</li>
</ul>
<h4 id="api4-changelogs-inventory">Inventory</h4>
<ul>
<li>すべてのクラフトとレシピに関するクラスは名前空間<code>pocketmine\crafting</code>に移動しました。</li>
<li>以下のクラスが追加されました。<ul>
<li><code>CallbackInventoryChangeListener</code></li>
<li><code>CreativeInventory</code>: 以前まで<code>pocketmine\item\Item</code>に埋め込まれていた機能群を含みます。詳細はアイテムの変更をご覧ください</li>
<li><code>InventoryChangeListener</code>: 一つのインベントリのイベントを監視できます(ただし介入はできません)。</li>
<li><code>transaction\CreateItemAction</code></li>
<li><code>transaction\DestroyItemAction</code></li>
</ul>
</li>
<li>以下のクラスはリネーム/移動されました。<ul>
<li><code>ContainerInventory</code> -&gt; <code>pocketmine\block\inventory\BlockInventory</code></li>
</ul>
</li>
<li>以下のクラスは名前空間<code>pocketmine\block\inventory</code> に移動されました。<ul>
<li><code>AnvilInventory</code></li>
<li><code>ChestInventory</code></li>
<li><code>DoubleChestInventory</code></li>
<li><code>EnchantInventory</code></li>
<li><code>EnderChestInventory</code></li>
<li><code>FurnaceInventory</code></li>
</ul>
</li>
<li>以下のクラスは削除されました。<ul>
<li><code>CustomInventory</code></li>
<li><code>InventoryEventProcessor</code></li>
<li><code>Recipe</code></li>
<li><code>transaction\CreativeInventoryAction</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Inventory-&gt;addChangeListeners()</code></li>
<li><code>Inventory-&gt;getChangeListeners()</code></li>
<li><code>Inventory-&gt;removeChangeListeners()</code></li>
<li><code>Inventory-&gt;swap()</code>: 二つのスロットのコンテンツを入れ替えます。</li>
</ul>
</li>
<li>以下のAPIメソッドは削除されました。<ul>
<li><code>BaseInventory-&gt;getDefaultSize()</code></li>
<li><code>BaseInventory-&gt;setSize()</code></li>
<li><code>Inventory-&gt;close()</code></li>
<li><code>Inventory-&gt;dropContents()</code></li>
<li><code>Inventory-&gt;getName()</code></li>
<li><code>Inventory-&gt;getTitle()</code></li>
<li><code>Inventory-&gt;onSlotChange()</code></li>
<li><code>Inventory-&gt;open()</code></li>
<li><code>Inventory-&gt;sendContents()</code></li>
<li><code>Inventory-&gt;sendSlot()</code></li>
<li><code>InventoryAction-&gt;onExecuteFail()</code></li>
<li><code>InventoryAction-&gt;onExecuteSuccess()</code></li>
<li><code>PlayerInventory-&gt;sendCreativeContents()</code></li>
</ul>
</li>
<li>以下のAPIメソッドはシグネチャが変更されました。<ul>
<li><code>Inventory-&gt;clear()</code>は<code>bool</code>の代わりに現在では<code>void</code>を返します。</li>
<li><code>Inventory-&gt;setItem()</code>は<code>bool</code>の代わりに現在では<code>void</code>を返します。</li>
<li><code>InventoryAction-&gt;execute()</code>は<code>bool</code>の代わりに現在では<code>void</code>を返します。</li>
<li><code>BaseInventory-&gt;construct()</code>は初期化用のアイテムリストを受け取らなくなりました。</li>
</ul>
</li>
<li><code>PlayerInventory-&gt;setItemInHand()</code>は現在ではそのプレイヤーが見える人にアイテム更新を送信します。</li>
</ul>
<h4 id="api4-changelogs-item">Item</h4>
<h5 id="api4-changelogs-general_1">General</h5>
<ul>
<li>新たに<code>VanillaItems</code>クラスが追加されました。すべての既知のアイテムタイプを生成する静的メソッドを含んでいます。これは定数が使われている<code>ItemFactory::get()</code>の代わりとして使われることが好ましいです。</li>
<li><code>StringToItemParser</code>が追加されました。あらゆる文字列をIDに関係なくアイテムへとマッピングすることができるようになりました。これらのマッピングは<code>/give</code>と<code>/clear</code>で使われていて、プラグインでのカスタムエイリアスを念頭に置いて作られています。<ul>
<li>つまり、見苦しいハックなしに<code>/give</code>のカスタムエイリアスが追加できるようになったということです。</li>
</ul>
</li>
<li><code>LegacyStringToItemParser</code>が追加されました。これは少しだけ動的な(しかし推奨はされない)<code>ItemFactory::fromString()</code>の置き換えです。</li>
<li><code>Item-&gt;count</code>はアクセス権がpublicから変更されました。</li>
<li>書き込める本(本と羽ペン,記入済みの本)のヒエラルキーが変更されました。<code>WritableBook</code>と<code>WrittenBook</code>は現在では<code>WritableBookBase</code>を継承します。</li>
<li>以下のAPIはシグネチャが変更されました。<ul>
<li><code>WritableBookBase-&gt;setPages()</code>は現在では<code>CompoundTag[]</code>の代わりに<code>WritableBookPage[]</code>を受け付けます。</li>
<li><code>ItemFactory::get()</code>は<code>string</code>を<code>tags</code>パラメータとして受け付けなくなりました。</li>
<li><code>ItemFactory::fromString()</code>は<code>$multiple</code>パラメータを受け取らなくなり、<code>Item|Item[]</code>ではなく<code>Item</code>のみを返すようになりました。</li>
</ul>
</li>
<li>以下のメソッドはメソッドチェーンが利用できるようになりました。(原文: The following methods are now fluent)<ul>
<li><code>WritableBookBase-&gt;setPages()</code></li>
<li><code>Item-&gt;addEnchantment()</code></li>
<li><code>Item-&gt;removeEnchantment()</code></li>
<li><code>Item-&gt;removeEnchantments()</code></li>
<li><code>Armor-&gt;setCustomColor()</code></li>
<li><code>WrittenBook-&gt;setTitle()</code></li>
<li><code>WrittenBook-&gt;setAuthor()</code></li>
<li><code>WrittenBook-&gt;setGeneration()</code></li>
</ul>
</li>
<li>以下のAPIメソッドは削除されました。<ul>
<li><code>Item-&gt;getNamedTagEntry()</code></li>
<li><code>Item-&gt;removeNamedTagEntry()</code></li>
<li><code>Item-&gt;setDamage()</code>: 現在では<code>Durable</code>を実装しているアイテム以外ではダメージは不変です。</li>
<li><code>Item-&gt;setNamedTagEntry()</code></li>
<li><code>Item::get()</code>: これはずいぶん前に<code>ItemFactory::get()</code>にとってかわられました。</li>
<li><code>Item::fromString()</code>: これはずいぶん前に<code>ItemFactory::fromString()</code>にとってかわられました。</li>
<li><code>Item-&gt;setCompoundTag()</code></li>
<li><code>Item-&gt;getCompoundTag()</code></li>
<li><code>Item-&gt;hasCompoundTag()</code></li>
<li><code>Potion::getPotionEffectsById()</code></li>
<li><code>ProjectileItem-&gt;getProjectileEntityType()</code></li>
</ul>
</li>
<li>以下の定数は削除されました。<ul>
<li><code>Potion::ALL</code> - <code>PotionType::getAll()</code>を代わりに使ってください。</li>
<li><code>Potion::WATER</code></li>
<li><code>Potion::MUNDANE</code></li>
<li><code>Potion::LONG_MUNDANE</code></li>
<li><code>Potion::THICK</code></li>
<li><code>Potion::AWKWARD</code></li>
<li><code>Potion::NIGHT_VISION</code></li>
<li><code>Potion::LONG_NIGHT_VISION</code></li>
<li><code>Potion::INVISIBILITY</code></li>
<li><code>Potion::LONG_INVISIBILITY</code></li>
<li><code>Potion::LEAPING</code></li>
<li><code>Potion::LONG_LEAPING</code></li>
<li><code>Potion::STRONG_LEAPING</code></li>
<li><code>Potion::FIRE_RESISTANCE</code></li>
<li><code>Potion::LONG_FIRE_RESISTANCE</code></li>
<li><code>Potion::SWIFTNESS</code></li>
<li><code>Potion::LONG_SWIFTNESS</code></li>
<li><code>Potion::STRONG_SWIFTNESS</code></li>
<li><code>Potion::SLOWNESS</code></li>
<li><code>Potion::LONG_SLOWNESS</code></li>
<li><code>Potion::WATER_BREATHING</code></li>
<li><code>Potion::LONG_WATER_BREATHING</code></li>
<li><code>Potion::HEALING</code></li>
<li><code>Potion::STRONG_HEALING</code></li>
<li><code>Potion::HARMING</code></li>
<li><code>Potion::STRONG_HARMING</code></li>
<li><code>Potion::POISON</code></li>
<li><code>Potion::LONG_POISON</code></li>
<li><code>Potion::STRONG_POISON</code></li>
<li><code>Potion::REGENERATION</code></li>
<li><code>Potion::LONG_REGENERATION</code></li>
<li><code>Potion::STRONG_REGENERATION</code></li>
<li><code>Potion::STRENGTH</code></li>
<li><code>Potion::LONG_STRENGTH</code></li>
<li><code>Potion::STRONG_STRENGTH</code></li>
<li><code>Potion::WEAKNESS</code></li>
<li><code>Potion::LONG_WEAKNESS</code></li>
<li><code>Potion::WITHER</code></li>
</ul>
</li>
<li>以下のメソッドはリネームされました。<ul>
<li><code>Item-&gt;getDamage()</code> -&gt; <code>Item-&gt;getMeta()</code></li>
</ul>
</li>
<li>以下のメソッドは <code>pocketmine\inventory\CreativeInventory</code>へと移動されました:<ul>
<li><code>Item::addCreativeItem()</code> -&gt; <code>CreativeInventory::add()</code></li>
<li><code>Item::clearCreativeItems()</code> -&gt; <code>CreativeInventory::clear()</code></li>
<li><code>Item::getCreativeItemIndex()</code> -&gt; <code>CreativeInventory::getItemIndex()</code></li>
<li><code>Item::getCreativeItems()</code> -&gt; <code>CreativeInventory::getAll()</code></li>
<li><code>Item::initCreativeItems()</code> -&gt; <code>CreativeInventory::init()</code></li>
<li><code>Item::isCreativeItem()</code> -&gt; <code>CreativeInventory::contains()</code></li>
<li><code>Item::removeCreativeItem()</code> -&gt; <code>CreativeInventory::remove()</code></li>
</ul>
</li>
<li>以下のクラスが追加されました。<ul>
<li><code>ArmorTypeInfo</code></li>
<li><code>Fertilizer</code></li>
<li><code>LiquidBucket</code></li>
<li><code>MilkBucket</code></li>
<li><code>PotionType</code>: バニラのポーションタイプについての情報を保持する列挙クラス</li>
<li><code>WritableBookBase</code></li>
<li><code>WritableBookPage</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Armor-&gt;getArmorSlot()</code></li>
<li><code>Item-&gt;canStackWith()</code>: 二つのアイテムが数量やサイズ上限は考慮せずに、同じアイテムスロットで保持できるかを返します。</li>
<li><code>Potion-&gt;getType()</code>: 適用されるエッふぇくとなどの情報をもつ<code>PotionType</code>列挙オブジェクトを返します。</li>
<li><code>ProjectileItem-&gt;createEntity()</code>: 投げられるプロジェクタイルエンティティの新規インスタンスを返します。</li>
</ul>
</li>
<li>以下のクラスは削除されました。<ul>
<li><code>ChainBoots</code></li>
<li><code>ChainChestplate</code></li>
<li><code>ChainHelmet</code></li>
<li><code>ChainLeggings</code></li>
<li><code>DiamondBoots</code></li>
<li><code>DiamondChestplate</code></li>
<li><code>DiamondHelmet</code></li>
<li><code>DiamondLeggings</code></li>
<li><code>GoldBoots</code></li>
<li><code>GoldChestplate</code></li>
<li><code>GoldHelmet</code></li>
<li><code>GoldLeggings</code></li>
<li><code>IronBoots</code></li>
<li><code>IronChesplate</code></li>
<li><code>IronHelmet</code></li>
<li><code>IronLeggings</code></li>
<li><code>LeatherBoots</code></li>
<li><code>LeatherCap</code></li>
<li><code>LeatherPants</code></li>
<li><code>LeatherTunic</code></li>
</ul>
</li>
</ul>
<h5 id="api4-changelogs-nbt-handling">NBT handling</h5>
<ul>
<li>シリアライズされたNBTバイト配列キャッシュはアイテムスタックに保持されなくなりました。これらのキャッシュはネットワークレイヤーシリアライズに用いられる早すぎる最適化であり、それ自体がネットワークNBT形式に依存していました。</li>
<li>内部NBTの利用は周縁化されます。 もはや即座に変更点をNBTへ書き込む必要はありません。以下のフックが追加されます:<ul>
<li><code>Item-&gt;serializeCompoundTag()</code></li>
<li><code>Item-&gt;deserializeCompoundTag()</code></li>
</ul>
</li>
<li>実行時NBTをアイテムから完全に取り除くことが計画されていますが、現段階では未解決の後方互換性の問題があります。</li>
</ul>
<h5 id="api4-changelogs-enchantment">Enchantment</h5>
<ul>
<li><code>VanillaEnchantments</code>クラスが追加されました。これはバニラのすべてのエンチャントを静的メソッドとして公開していて、 <code>Enchantment::get()</code>の意地の悪さを置き換えます。<ul>
<li>例: <code>Enchantment::get(Enchantment::PROTECTION)</code>は<code>VanillaEnchantments::PROTECTION()</code>で置き換えられました。</li>
<li>これらのメソッドは<code>Enchantment</code>の代わりに適切なタイプの情報を静的解析に渡し、コーディングがしやすくなりました。</li>
</ul>
</li>
<li>MCPEのエンチャントIDとPocketMine-MP内部のIDの境目がより明確になりました。<ul>
<li>IDハンドリングは<code>pocketmine\data\bedrock\EnchantmentIdMap</code>へ移動しました。</li>
<li>すべてのエンチャントID定数は<code>Enchantment</code>から削除されました。何らかの理由でレガシーエンチャントIDが必要なら<code>pocketmine\data\bedrock\EnchantmentIds</code>を利用してください。</li>
</ul>
</li>
<li><code>Enchantment::RARITY_*</code>定数は<code>Rarity</code>に移動され、<code>RARITY_</code>プレフィックスは削除されました。</li>
<li><code>Enchantment::SLOT_*</code>定数は<code>ItemFlags</code>に移動され、<code>SLOT_</code>プレフィックスは削除されました。</li>
<li>以下のAPIメソッドは移動されました。<ul>
<li><code>Enchantment::registerEnchantment()</code> -&gt; <code>EnchantmentIdMap-&gt;register()</code></li>
<li><code>Enchantment::getEnchantment()</code> -&gt; <code>EnchantmentIdMap-&gt;fromId()</code></li>
<li><code>Enchantment-&gt;getId()</code> -&gt; <code>EnchantmentIdMap-&gt;toId()</code></li>
<li><code>Enchantment::getEnchantmentByName()</code> -&gt; <code>VanillaEnchantments::fromString()</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Enchantment-&gt;getRuntimeId()</code>: これは<strong>動的ID</strong>でありエンチャントタイプの比較に用いることができます。<strong>これは決して保持されないため、configやNBTでは利用しないでください！</strong></li>
</ul>
</li>
</ul>
<h4 id="api4-changelogs-lang">Lang</h4>
<ul>
<li>以下のクラスはリネームされました。<ul>
<li><code>BaseLang</code> -&gt; <code>Language</code></li>
<li><code>TranslationContainer</code> -&gt; <code>Translatable</code></li>
</ul>
</li>
<li>以下のクラスは削除されました。<ul>
<li><code>TextContainer</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Translatable-&gt;format()</code>: 変換に対してフォーマット(カラーコードなど)を追加できます。</li>
<li><code>Translatable-&gt;prefix()</code>: プレフィックスを追加できます。</li>
<li><code>Translatable-&gt;postfix()</code>: ポストフィキシングを追加できます。</li>
</ul>
</li>
<li>以下のAPIメソッドはシグネチャが変更されました。<ul>
<li><code>Translatable-&gt;__construct()</code>は現在では<code>list&lt;string&gt;</code>だけではなく<code>array&lt;int|string, Translatable|string&gt;</code>をパラメータとして受け取ります。</li>
<li><code>Translatable-&gt;getParameter()</code>は現在では<code>int</code>だけではなく<code>int|string</code>をインデックスとして受け取ります。</li>
<li><code>Translatable-&gt;getParameter()</code>は現在では<code>string</code>だけではなく<code>Translatable|string</code>を返します。</li>
<li><code>Translatable-&gt;getParameters()</code>は現在では<code>array&lt;int|string, Translatable|string&gt;</code>を返します。</li>
</ul>
</li>
<li><code>LanguageNotFoundException</code>が追加されました。これはサーバーファイルに存在しない<code>Language</code>を構成しようとした際に投げられます。</li>
<li><code>Translatable</code>は現在では変換パラメータのキーを無視しなくなりました。以前までは挿入される順番のみが考慮されていました。</li>
<li><code>Translatable</code>は変換パラメータの文字列キーをサポートするようになりました。</li>
<li><code>Translatable</code>は現在では、他の<code>Translatable</code>を変換パラメータとして提供することをサポートします。</li>
<li><code>Language-&gt;translateString()</code>は現在では、<code>Translatable</code>を変換パラメータとして提供することをサポートします。</li>
<li><code>Language-&gt;translateString()</code>は自動的な文字列パラメータ変換を試みなくなりました。もし変換したければ、明示的に変換する必要があります。これによりプレイヤーが変換キーを含むメッセージを送信した際に図らずも変換されてしまうバグが修正されます。</li>
<li><code>Language-&gt;translate()</code>は<code>Translatable</code>の文字列パラメータを変換しなくなりました。(上で指摘した点と同様)</li>
</ul>
<h4 id="api4-changelogs-network">Network</h4>
<ul>
<li>以下のフィールドが削除されました。</li>
<li><code>Network::$BATCH_THRESHOLD</code></li>
<li>以下のクラスがリネームされました。</li>
<li><code>SourceInterface</code> -&gt; <code>NetworkInterface</code></li>
<li><code>AdvancedSourceInterface</code> -&gt; <code>AdvancedNetworkInterface</code></li>
<li>以下のクラスが移動されました。</li>
<li><code>CompressBatchedTask</code> -&gt; <code>mcpe\CompressBatchTask</code></li>
<li><code>level\format\io\ChunkRequestTask</code> -&gt; <code>mcpe\ChunkRequestTask</code></li>
<li><code>mcpe\RakLibInterface</code> -&gt; <code>mcpe\raklib\RakLibInterface</code></li>
<li>以下のクラスが削除されました。</li>
<li><code>mcpe\PlayerNetworkSessionAdapter</code></li>
<li>以下のメソッドがリネームされました。</li>
<li><code>UPnP::PortForward()</code> -&gt; <code>UPnP::portForward()</code></li>
<li><code>UPnP::RemovePortForward()</code> -&gt; <code>UPnP::removePortForward()</code></li>
<li>以下のメソッドはシグネチャが変更されました。</li>
<li><code>UPnP::portForward()</code>は<code>string $serviceURL, string $internalIP, int $internalPort, int $externalPort</code>を受け取るようになりました。</li>
<li><code>UPnP::removePortForward()</code>は<code>string $serviceURL, int $externalPort</code>を受け取るようになりました。</li>
<li>以下のメソッドは削除されました。</li>
<li><code>NetworkInterface-&gt;putPacket()</code></li>
<li><code>NetworkInterface-&gt;close()</code></li>
<li><code>NetworkInterface-&gt;emergencyShutdown()</code></li>
<li><code>NetworkInterface</code>はプレイヤーネットワークインターフェースに特化するものではなく、現在ではいかなるネットワークコンポーネントにも実装されるためにより汎用なインターフェースを表します。</li>
<li><code>rcon</code>サブ名前空間以下にあるものはすべて削除されました。</li>
<li><code>upnp\UPnP</code>には重大な変更点があります。これは現在では二つの静的メソッドではなくネットワークコンポーネントになりました。</li>
</ul>
<h4 id="api4-changelogs-permission">Permission</h4>
<ul>
<li>以下の新規許可ノードが導入されます。<ul>
<li><code>pocketmine.group.everyone</code>: デフォルトで全員に与えられます。</li>
<li><code>pocketmine.group.operator</code>: OPのプレイヤーとコンソールに与えられます。
これらの許可ノードはほかのノードと同様に許可付与によって割り当て・上書き可能です。つまり、現在ではプレイヤー切断時(や付与が外れた際)に無くなる<strong>一時的OP</strong>状態を与えることができます。 </li>
</ul>
</li>
<li>許可が明示的にセットされていない時やほかの許可により暗示的に付与されている場合には、現在では常にfalseとなるようになりました。</li>
<li>定義されていない許可は<code>Permission::$DEFAULT_PERMISSION</code>ではなく、現在では常に<code>false</code>となりました。</li>
<li>許可は内部的にデフォルト値を持たなくなりました。 その代わりに、デフォルト値は<code>pocketmine.group</code>の子として許可として割り当てられます。<ul>
<li><code>true</code>: <code>pocketmine.group.everyone</code>に子として値<code>true</code>で追加する</li>
<li><code>false</code>: いかなる許可にも与えない</li>
<li><code>op</code>: <code>pocketmine.group.operator</code>に子として値<code>true</code>で追加する</li>
<li><code>notop</code>: <code>pocketmine.group.everyone</code>に子として値<code>true</code>で、<code>pocketmine.group.operator</code>に<code>false</code>で追加する
しかし、<code>plugin.yml</code>での許可定義での<code>default</code>キーはサポートされ続けます。</li>
</ul>
</li>
<li><code>PermissibleBase</code>を利用する際のひな形を減らすために<code>PermissibleDelegateTrait</code>が追加されました。このトレイトは<code>ConsoleCommandSender</code>と<code>Player</code>で利用されています。</li>
<li>以下のAPIメソッドは移動されました。<ul>
<li><code>Permission::getByName()</code> -&gt; <code>PermissionParser::defaultFromString()</code></li>
<li><code>Permission::loadPermissions()</code> -&gt; <code>PermissionParser::loadPermissions()</code></li>
<li><code>Permission::loadPermission()</code> -&gt; <code>PermissionParser::loadPermission()</code></li>
</ul>
</li>
<li>以下の定数は移動されました。<ul>
<li><code>Permission::DEFAULT_FALSE</code> -&gt; <code>PermissionParser::DEFAULT_FALSE</code></li>
<li><code>Permission::DEFAULT_TRUE</code> -&gt; <code>PermissionParser::DEFAULT_TRUE</code></li>
<li><code>Permission::DEFAULT_OP</code> -&gt; <code>PermissionParser::DEFAULT_OP</code></li>
<li><code>Permission::DEFAULT_NOT_OP</code> -&gt; <code>PermissionParser::DEFAULT_NOT_OP</code></li>
</ul>
</li>
<li>以下のAPIメソッドが追加されました。<ul>
<li><code>Permission-&gt;addChild()</code></li>
<li><code>Permission-&gt;removeChild()</code></li>
<li><code>Permissible-&gt;getPermissionRecalculationCallbacks()</code> - 新規許可が与えられたり拒否されたりなど、許可の変更に対しての反応が行えるようになります。</li>
<li><code>Permissible-&gt;setBasePermission()</code> - <code>pocketmine.group.operator</code>などのルート許可を割り当てる際に使用されます。通常プラグインでは使用するべきではありません。</li>
<li><code>Permissible-&gt;unsetBasePermission()</code></li>
<li><code>PermissionAttachmentInfo-&gt;getGroupPermissionInfo()</code> - returns the <code>PermissionAttachmentInfo</code> of the permission that caused the current permission value to be set, or null if the permission is explicit</li>
</ul>
</li>
<li>以下のAPIメソッドが削除されました。<ul>
<li><code>Permissible-&gt;isOp()</code>: use <code>Permissible-&gt;hasPermission(DefaultPermissions::ROOT_OPERATOR)</code> instead, <strong>but you really shouldn't directly depend on a player's op status, add your own permissions instead!</strong></li>
<li><code>Permissible-&gt;setOp()</code>: use <code>addAttachment($plugin, DefaultPermissions::ROOT_OPERATOR, true)</code> instead to add, and <code>removeAttachment()</code> to remove it (or addAttachment() with false to explicitly deny it, just like any other permission)</li>
<li><code>Permission-&gt;addParent()</code></li>
<li><code>Permission-&gt;getDefault()</code></li>
<li><code>Permission-&gt;setDefault()</code></li>
<li><code>PermissionManager-&gt;getDefaultPermissions()</code></li>
<li><code>PermissionManager-&gt;recalculatePermissionDefaults()</code></li>
<li><code>PermissionManager-&gt;subscribeToDefaultPerms()</code></li>
<li><code>PermissionManager-&gt;unsubscribeFromDefaultPerms()</code></li>
<li><code>PermissionManager-&gt;getDefaultPermSubscriptions()</code></li>
<li><code>PermissionAttachment-&gt;getPermissible()</code></li>
<li><code>PermissionAttachmentInfo-&gt;getPermissible()</code></li>
</ul>
</li>
<li>以下のフィールドは削除されました。<ul>
<li><code>Permission::$DEFAULT_PERMISSION</code></li>
</ul>
</li>
<li>The following API methods have changes:<ul>
<li><code>PermissionParser::defaultFromString()</code> now throws <code>InvalidArgumentException</code> on unknown values.</li>
<li><code>Permission-&gt;__construct()</code> no longer accepts a <code>$defaultValue</code> parameter (see notes above about defaults refactor).you should add your permission as a child of <code>pocketmine.group.everyone</code> or <code>pocketmine.group.operator</code> instead).</li>
</ul>
</li>
<li>The following classes have been removed:<ul>
<li><code>ServerOperator</code></li>
</ul>
</li>
</ul></section><h1 class='nav-section-title-end'>Ended: API4</h1>
                        <h1 class='nav-section-title' id='section-単項記事'>
                            単項記事 <a class='headerlink' href='#section-単項記事' title='Permanent link'>↵</a>
                        </h1>
                        
                        <h2 class='nav-section-title' id='section-poggit'>
                            Poggit <a class='headerlink' href='#section-poggit' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="dictionary-poggit-poggit"><h1 id="dictionary-poggit-poggit-poggit">Poggit</h1>
<p>PocketMineの公式プラグインレポジトリです。
ここにあるプラグインは以下の二つに分けられます。</p>
<ul>
<li>
<p><strong>Releases</strong> Poggitスタッフに承認されたプラグインがダウンロードでき、評価をつけることもできます。</p>
</li>
<li>
<p><strong>Dev</strong> 開発中のプラグインがダウンロードできます。動作の確認がされているとは限りません。</p>
</li>
</ul>
<h2 id="dictionary-poggit-poggit-_1">使い方</h2>
<!-- 画像をつける -->
<p>ReleasesやDevタブからプラグインを探すことができます。
Relesesでは初期状態ではすべてのプラグインが表示されていますが<code>All Caregories</code>となっているプルダウンメニューから自分の探したいジャンル、<code>All API Versions</code>となっているメニューから対応するバージョンを絞って探すことができます。</p></section><section class="print-page" id="dictionary-poggit-virion"><h1 id="dictionary-poggit-virion-virion">Virion</h1>
<p>Poggit Virion(以下Virion)はPocketMineプラグイン専用のPHPライブラリです。
このドキュメントでは、Virionの開発と使用についてのワークフローについての情報を提供します。</p>
<h2 id="dictionary-poggit-virion-virion_1">Virionの目的</h2>
<p>ソフトウェア開発においてライブラリは素晴らしいものですが、複数のプラグインが同じライブラリを使用する場合、同じPHPランタイムで実行されるために間違ったバージョンのライブラリが使用される可能性があります。Virionフレームワークでは、クラスをシェーディング(名前空間の操作)することでこの問題を解決することを目指しています。</p>
<h2 id="dictionary-poggit-virion-_1">前置き</h2>
<p>Virionはプラグインや他のVirionによって使用されます。
このドキュメントでは、<code>Virionユーザ</code>は、Virionを使用するプラグインまたはVirionを指します。</p>
<h2 id="dictionary-poggit-virion-_2">ワークフロー</h2>
<h3 id="dictionary-poggit-virion-virion_2">Virionの開発</h3>
<p>Virionはメインクラスを含む必要はありませんが、virion が宣言するすべてのシンボル (クラス・インターフェース・trait・名前空間関数・名前空間定数) は、<strong>Antigen</strong>と呼ばれるVirionの名前空間、またはAntigenのサブ名前空間の下になければなりません。
Antigenはビリオンに固有のものでなければなりません。
他のVirionやプラグインは、Antigenの名前空間またはその下位の名前空間の下でシンボルを宣言することはできません。</p>
<p>名前空間内に置くことができない他の名前付きグローバルリソースを登録する場合、その名前は、Virionのランタイム名前空間に依存するか、Virionユーザが提供する文字列に依存する必要があります。
例えば、VirionがAsyncTaskスレッドストアを使用する場合、<code>AsyncTask::saveToThreadStore()</code>に渡されるキーは<strong>クラスの構文上の名前空間の参照 (<a href="#dictionary-poggit-virion-構文的参照">構文的参照</a>) から生成されるか、Virionユーザから渡された値から生成されなければなりません</strong>。
stream_wrapper_register()`も同様のケースで、プロトコル名Virionによってハードコードされてはなりません。</p>
<p>Virionフレームワークには、<code>PSR-0</code>のソースファイルとVirionのマニフェストファイル <code>virion.yml</code> が含まれています。
<code>virion.yml</code>には以下の属性が含まれます。</p>
<table>
<thead>
<tr>
<th align="center">名前</th>
<th align="center">説明</th>
<th align="center">例</th>
<th align="center">必須/任意</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>name</code></td>
<td align="center">現在は使用されていませんが、Poggitのプロジェクト名と一致する必要があります。</td>
<td align="center"><code>libasynql</code></td>
<td align="center">必須</td>
</tr>
<tr>
<td align="center"><code>version</code></td>
<td align="center">セマンティック・バージョニングを用いたVirionのバージョン</td>
<td align="center"><code>0.1.0-beta</code></td>
<td align="center">必須</td>
</tr>
<tr>
<td align="center"><code>antigen</code></td>
<td align="center">Antigen(名前空間)</td>
<td align="center"><code>poggit\libasynql</code></td>
<td align="center">必須</td>
</tr>
<tr>
<td align="center"><code>api</code></td>
<td align="center">このVirionが使用できる<strong>唯一</strong>のPocketMine APIのバージョンです。plugin.yml の<code>api</code>と同じシステムを使用します。</td>
<td align="center"><code>[1.4.0, 2.0.0, 3.0.0-ALPHA1]</code></td>
<td align="center"><code>api</code>か<code>php</code>のどちらか</td>
</tr>
<tr>
<td align="center"><code>php</code></td>
<td align="center">このVirionが使用できる<strong>唯一</strong>の PHP バージョンです。plugin.ymlの<code>api</code> と同様のシステムを使用します。</td>
<td align="center"><code>[5.6, 7.0]</code></td>
<td align="center"><code>api</code>か<code>php</code>のどちらか</td>
</tr>
<tr>
<td align="center"><code>authors</code></td>
<td align="center">製作者名。文字列かリストが指定できます。</td>
<td align="center"><code>[SOFe, PEMapModder]</code></td>
<td align="center">任意</td>
</tr>
<tr>
<td align="center"><code>description</code></td>
<td align="center">説明文</td>
<td align="center"><code>Simple asynchronous SQL access</code></td>
<td align="center">任意</td>
</tr>
</tbody>
</table>
<p>異なるプラグインで使用されている同じVirionが相互に作用してはいけません。</p>
<h3 id="dictionary-poggit-virion-virion_3">Virionユーザの開発</h3>
<p>virion ユーザーは、virion によって宣言されたシンボルが正常にロードされることを前提に開発することができます。ただし、これらのシンボルへのすべての参照は、<a href="#dictionary-poggit-virion-構文的参照">構文的</a>でなければなりません。</p>
<h3 id="dictionary-poggit-virion-virion_4">Virionやプラグインのテスト</h3>
<p>Virion用テスターの役割を果たすプラグインを作ることが推奨されます。</p>
<p>Poggitは<a href="https://poggit.pmmp.io/p/DEVirion">DEVirion</a>を提供しています。詳しい使い方はPoggitのリリースページにあるプラグインの説明を参照してください。
このプラグインを使うと、Phar形式またはフォルダ形式のVirionまたはプラグインでサーバーを動かすことができます。</p>
<p><strong>デバッグ以外の理由でDEVirionを使用しないでください</strong>。
DEVirionはvirionのクラスを影で支えているわけではないので、DEVirionを使った複数のプラグインがあっても互換性の問題が発生し、virionフレームワークの意味がなくなってしまいます。</p>
<h3 id="dictionary-poggit-virion-poggitvirion">PoggitでVirionをビルドする</h3>
<p>Virionプロジェクトは、プラグインプロジェクトと同様にリポジトリの<code>.poggit.yml</code>で宣言することができますが、プロジェクト属性が 2 つ追加されます。</p>
<div class="highlight"><pre><span></span><code><span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
<span class="nt">model</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">virion</span>
</code></pre></div>
<p>例:</p>
<div class="highlight"><pre><span></span><code><span class="nt">projects</span><span class="p">:</span>
  <span class="nt">libasynql</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/libasynql</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">model</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">virion</span>
</code></pre></div>
<h3 id="dictionary-poggit-virion-virion_5">ローカルでVirionをビルドする</h3>
<p>Virionをローカルで直接コンパイルする公式ツールは作成されていませんが、ビルドスクリプトは簡単に作成することができます。</p>
<p>基本的にVirionはプラグインと同じフォーマットですが、4つの違いがあります。
- <code>plugin.yml</code>が<code>virion.yml</code>になります。
- <code>resources</code> はサポートされていません (将来的に追加される可能性があります)。
- <code>virion.php</code>というファイルと、<code>virion_stub.php</code>というファイルがpharに含まれている必要があります。これらのファイルは、<a href="https://github.com/poggit/poggit/tree/beta/assets/php/"></a>からダウンロードすることができます。
    - <code>virion_stub.php</code>はビルド用のCLIを提供します。
    - <code>virion.php</code>には、実際にVirionを注入するコードが含まれています。
- pharのスタブは<code>virion.php</code>を直接読み込む必要があります。以下は有効なスタブの例です。</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span> <span class="k">require</span> <span class="s2">&quot;phar://&quot;</span> <span class="o">.</span> <span class="no">__FILE__</span> <span class="o">.</span> <span class="s2">&quot;/virion_stub.php&quot;</span><span class="p">;</span> <span class="nx">__HALT_COMPILER</span><span class="p">();</span>
</code></pre></div>
<p><a href="https://github.com/poggit/poggit/blob/d587ecf3891270bd37940bf5640fca1eb7e374ad/src/poggit/ci/builder/PoggitVirionBuilder.php?utf8=%E2%9C%93#L50-L52">参考</a></p>
<h3 id="dictionary-poggit-virion-poggitvirion_1">PoggitでVirionユーザをビルドする</h3>
<p>Virionユーザ(Virionを使用するプラグインやVirion本体)は、<code>.poggit.yml</code>で使用するVirionを宣言することができ、プラグインのビルド時にPoggitが自動的にVirionを注入します。Virionは、プラグインプロジェクトの<code>libs</code>属性でリストアップできます。利用する各Virionの宣言は下記の属性を含みます。</p>
<table>
<thead>
<tr>
<th align="center">名前</th>
<th align="center">説明</th>
<th align="center">形式・例</th>
<th align="center">必須/任意</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>format</code></td>
<td align="center">ライブラリのフォーマット</td>
<td align="center"><code>virion</code> (現在この値のみ選択可能)</td>
<td align="center">任意 (デフォルト：<code>virion</code>)</td>
</tr>
<tr>
<td align="center"><code>vendor</code></td>
<td align="center">Virionのインポート元</td>
<td align="center"><code>poggit-project</code> または <code>raw</code></td>
<td align="center">任意 (デフォルト：<code>poggit-project</code>)</td>
</tr>
<tr>
<td align="center"><code>src</code> (<code>vendor</code>属性で<code>poggit-project</code>を選択した場合)</td>
<td align="center">Poggitプロジェクトのフルパス</td>
<td align="center"><code>/projectName</code> (同じリポジトリのプロジェクト) OR <code>repoOwner/repoName/projectName</code></td>
<td align="center">必須</td>
</tr>
<tr>
<td align="center"><code>src</code> (<code>vendor</code>属性で<code>raw</code>)を選択した場合</td>
<td align="center">ダウンロード先URL(HTTP/HTTPS)、またはプロジェクトからの相対パス</td>
<td align="center"><code>https://example.com/virion.phar</code> または <code>libs/virion.phar</code></td>
<td align="center">必須</td>
</tr>
<tr>
<td align="center"><code>version</code> (<code>vendor: poggit-project</code>)</td>
<td align="center"><a href="https://getcomposer.org/doc/articles/versions.md">セマンティックバージョニング</a>で指定</td>
<td align="center"><code>^1.0</code></td>
<td align="center"><code>vender</code>属性で<code>poggit-project</code>を指定した場合のみ必須</td>
</tr>
<tr>
<td align="center"><code>shade</code></td>
<td align="center">シェーディングストラテジ</td>
<td align="center"><code>syntax</code> または <code>single</code> または <code>double</code></td>
<td align="center">任意 (デフォルト：<code>syntax</code>)</td>
</tr>
<tr>
<td align="center"><code>branch</code> (<code>vendor</code>属性で<code>poggit-project</code>を選択した場合)</td>
<td align="center">ブランチの指定</td>
<td align="center"><code>ブランチ名</code> または <code>:default</code>(デフォルトブランチ) または <code>*</code>/<code>%</code>(全てのブランチ)</td>
<td align="center">任意(デフォルト：<code>:default</code>)</td>
</tr>
<tr>
<td align="center"><code>epitope</code></td>
<td align="center">追加の名前空間</td>
<td align="center"><code>.random</code>(ランダム) または <code>.sha</code>(ハッシュ) または <code>.none</code> または <code>任意の名前空間</code></td>
<td align="center">任意 (デフォルト：<code>libs</code>)</td>
</tr>
</tbody>
</table>
<p><strong>注意</strong></p>
<p>セキュリティ上の理由から、Poggitでのビルドではローカルのvirion.phpを無視し、常に最新のvirion.phpを使用します。</p>
<h3 id="dictionary-poggit-virion-virion_6">ローカルでVirionユーザをコンパイルする</h3>
<p>ビルドされたVirionには、<code>virion_stub.php</code>および<code>virion.php</code>ファイルが含まれている必要があります。これらのファイルはVirionをVirionユーザに注入するためのCLIを提供します。</p>
<p>基本的な使い方：</p>
<div class="highlight"><pre><span></span><code>php used_virion.phar virion_user.phar <span class="si">${</span><span class="nv">ANTIBODY_PREFIX</span><span class="si">}</span>
</code></pre></div>
<p><code>${ANTIBODY_PREFIX}</code>はビリオンユーザーのメインの名前空間（プラグインの場合はメインクラスの名前空間、ビリオンの場合はAntigenの名前空間）でなければなりません。バックスラッシュ等はエスケープする必要があります。</p>
<h2 id="dictionary-poggit-virion-cli">CLI機能の拡張</h2>
<p>Virionは、プロジェクトルートに<code>cli-map.json</code>というファイルを追加することで、カスタムコマンドを追加することができます。このファイルには、コマンド名と実行ファイルをマッピングしたオブジェクトを記述します。</p>
<p><code>cli-map.json</code>が存在する場合、Poggitはsrcディレクトリのオートローダーのための<code>cli-autoload.php</code>を作成します。</p>
<p>コマンド名は<code>.phar</code>で終わらないようにしてください。</p>
<h2 id="dictionary-poggit-virion-_3">制限事項</h2>
<ul>
<li>Virionユーザは、自分のAPIでVirionのクラスを公開してはいけません。もしそのようなオブジェクトをAPIで公開しなければならない場合は、Virionユーザが宣言したインターフェースでラップしなければなりません。</li>
</ul>
<h2 id="dictionary-poggit-virion-_4">付録</h2>
<h3 id="dictionary-poggit-virion-_5">構文的参照</h3>
<p>基本的に、構文参照は以下のように定義されます。</p>
<blockquote>
<p>A <code>T_NAMESPACE</code> (<code>namespace</code>), <code>T_USE</code> (<code>use</code>) or <code>T_NS_SEPARATOR</code> (<code>\</code>) token, or <code>T_USE</code> + <code>T_FUNCTION</code> (<code>use function</code>) or <code>T_USE</code> + <code>T_CONST</code> (<code>use const</code>), followed by a consecutive series of <code>T_STRING</code> (a non-keyword set of characters, i.e. part of the namespace) and <code>T_NS_SEPARATOR</code> (<code>\</code>).</p>
</blockquote>
<p>Virionの<code>クラス</code>・<code>関数</code>・<code>定数</code>の名前空間を参照する際には、以下のような形式で<strong>のみ</strong>行うことができます。</p>
<p><div class="highlight"><pre><span></span><code><span class="x">namespace name\space;</span>
<span class="x">use name\space\Clazz;</span>
<span class="x">use function name\space\func;</span>
<span class="x">use const name\space\CONSTANT;</span>
<span class="x">\name\space\Clazz::method();</span>
</code></pre></div>
<code>poggit\libasynql</code>というAntigenのVirionの例：</p>
<div class="highlight"><pre><span></span><code><span class="x">// syntactic reference</span>
<span class="x">use poggit\libasynql\SqlResult as Result; </span>
<span class="x">$result = new Result;</span>

<span class="x">// syntactic reference</span>
<span class="x">$result = new \poggit\libasynql\SqlResult;</span>

<span class="x">// syntactic reference</span>
<span class="x">use poggit\libasynql\SqlResult as Result;</span>
<span class="x">$class = new \ReflectionClass(Result::class);</span>

<span class="x">// syntactic reference</span>
<span class="x">$class = new \ReflectionClass(\poggit\libasynql\SqlResult::class);</span>

<span class="x">// syntactic references, from the scope of a class method in poggit\libasynql\SqlResult</span>
<span class="x">$class = new \ReflectionClass(self::class);</span>
<span class="x">$class = new \ReflectionClass(static::class);</span>
<span class="x">$class = new \ReflectionClass(get_class());</span>
<span class="x">$class = new \ReflectionClass(__CLASS__);</span>
<span class="x">$class = new \ReflectionClass(__NAMESPACE__ . &quot;\\SqlResult&quot;); // a boundary case barely acceptable</span>

<span class="x">// non-syntactic reference</span>
<span class="x">$class = new \ReflectionClass(&quot;poggit\\libasynql\\SqlResult&quot;);</span>
<span class="x">$class = new \ReflectionClass(&#39;poggit\libasynql\SqlResult&#39;);</span>
</code></pre></div>
<p>名前空間からの相対参照はシェーディングされないため、<strong>Virionの名前空間への相対参照は使用しないでください</strong>。例えば、Virion のAntigenが<code>namespace poggit\libasynql</code>である場合、Virionユーザでは<code>namespace poggit</code>で始まるコードを書いてはいけません。</p></section><h1 class='nav-section-title-end'>Ended: Poggit</h1><h1 class='nav-section-title-end'>Ended: 単項記事</h1><section class="print-page" id="link"><h1 id="link-_1">リンク集</h1>
<h2 id="link-_2">バイナリやソースコードの配布先</h2>
<ul>
<li><a href="https://github.com/pmmp/PocketMine-MP">pmmp/PocketMine-MP(GitHub)</a> - Releaseから最新版をダウンロード可能</li>
<li><a href="https://dev.azure.com/pocketmine/PHP-Builds/_build?definitionId=3&amp;_a=summary">PHP8 Binary</a> - publishedから、︙をクリックでダウンロードできます。</li>
</ul>
<h2 id="link-_3">ドキュメント</h2>
<ul>
<li><a href="https://pmmp.readthedocs.io/en/rtfd">公式ドキュメント</a> - インストール方法やアップデート方法、プラグインについてやよくある質問を見ることができます。</li>
</ul>
<h2 id="link-_4">フォーラム</h2>
<ul>
<li><a href="https://forums.pmmp.io">Forums</a> - 公式フォーラム(英語)</li>
<li><a href="https://forum.mcbe.jp">MCBEフォーラム</a> - 非公式日本語フォーラム</li>
<li><a href="https://forum.minecraft.study/">マインクラフト非公式フォーラム</a></li>
</ul>
<h2 id="link-_5">サーバーリスト</h2>
<ul>
<li><a href="https://mcservers.jp/">MCServers.JP</a></li>
</ul>
<h2 id="link-_6">プラグイン配布先</h2>
<ul>
<li><a href="https://poggit.pmmp.io/">poggit</a> - レビューされたプラグインやその他開発中のプラグインをダウンロードできます。</li>
</ul></section></div>
                
              

  

              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
<script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.placeholder": "\u691c\u7d22", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
    

<script src="https://unpkg.com/iframe-worker/polyfill"></script>
<script src="search/search_index.js"></script>


    
      <script src="assets/javascripts/bundle.1e84347e.min.js"></script>
      
        <script src="js/print-site.js"></script>
      
        <script src="js/arithmatex.config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>