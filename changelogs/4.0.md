# 4.0チェンジログ
Minecraft: Bedrock Edition 1.18.0用

# 4.0.0
リリース 2021.12.1

このメジャーバージョンAPI4は重要なAPIの変更,新しいワールド形式のサポート,パフォーマンスの向上やネットワークの刷新を含めたコア全体の重要な変更に焦点を当てています。

## Core
### 一般
- RCON削除
  - [RconServer](https://github.com/pmmp/RconServer)で代用可能
- スポーンプロテクション削除
  - [BasicSpawnProtection](https://github.com/pmmp/BasicSpawnProtection)で代用可能
- 移動に関するアンチチートの削除
- GS4 QueryはRakLibが無効になったときに中断しなくなった
- プリプロセッサはコストが実益に見合わないためビルドから取り除かれた。使用は非推奨。
- タイトルバーからヒープメモリの使用量を削除
- `start.sh`はPHPバイナリが見つからなければ単にPHPバイナリがないと表示するようになった
- CLIオプションの`--bootstrap`を削除
- IPv6による接続をサポート
  - IPv6が無効化されていてもPHPバイナリはIPv6をサポートする必要がある。これはIPv4のみを使用している場合でもRakNetが接続パケットにおいてリンクローカルIPv6ループバックアドレスに送信する可能性があるため。
  - 統合版クライアントがIPv6のサーバーをLAN上で検知できるようにデフォルトではポート`19133`がIPv6のために使われる。
  - GS4 Queryは`server.properties`の設定に従いIPv4とIPv6の両方でサポートされる。
  - `server.properties`に`enable-ipv6`, `server-ipv6`, `server-portv6`が追加(下を参照せよ)

### 依存関係の変更
- `pocketmine_chunkutils`PHP拡張を削除
- PHPのIPv6が必須になる
- 新規PHP拡張が必須となる
  - [crypto](https://github.com/bukka/php-crypto)
  - [chunkutils2](https://github.com/pmmp/ext-chunkutils2)
  - [gmp](https://www.php.net/manual/en/book.gmp.php)
  - [igbinary](https://github.com/igbinary/igbinary)
  - [leveldb](https://github.com/pmmp/php-leveldb) ([pmmp/leveldb](https://github.com/pmmp/leveldb/tree/mojang-compatible)でビルドされたもの)
  - [morton](https://github.com/pmmp/ext-morton)
- 以下のComposer依存関係が変更 ([以前のバージョン ->] 現在のバージョン)で記述
  - `pocketmine/bedrock-protocol` [7.0.0](https://github.com/pmmp/BedrockProtocol/releases/tag/7.0.0+bedrock-1.18.0).
  - `pocketmine/classloader` 0.1.0 -> [0.2.0](https://github.com/pmmp/ClassLoader/releases/tag/0.2.0) (**重要なAPIの変更, 新機能**).
  - `pocketmine/color` [0.2.0](https://github.com/pmmp/Color/releases/tag/0.2.0).
  - `pocketmine/errorhandler` [0.3.0](https://github.com/pmmp/ErrorHandler/releases/tag/0.3.0).
  - `pocketmine/locale-data` [2.0.16](https://github.com/pmmp/Language/releases/tag/2.0.16).
  - `pocketmine/log` 0.2.0 -> [0.4.0](https://github.com/pmmp/Log/releases/tag/0.4.0) (**小規模なAPIの変更**, see also [0.3.0](https://github.com/pmmp/Log/releases/tag/0.3.0)).
  - `pocketmine/nbt` 0.2.18 -> [0.3.0](https://github.com/pmmp/NBT/releases/tag/0.3.0) (**重要なAPIの変更**).
  - `pocketmine/raklib` 0.12.7 -> [0.14.2](https://github.com/pmmp/RakLib/releases/tag/0.14.2) (**重要なAPIの変更**, [0.13.0](https://github.com/pmmp/RakLib/releases/tag/0.13.0)も参照).
  - `pocketmine/raklib-ipc` [0.1.0](https://github.com/pmmp/RakLibIpc/releases/tag/0.1.0) (RakLibから抽出されたコンポーネント).
  - `pocketmine/snooze` 0.1.0 -> [0.3.0](https://github.com/pmmp/Snooze/releases/tag/0.3.0) (**小規模なAPIの変更**, [0.2.0](https://github.com/pmmp/Snooze/releases/tag/0.2.0)も参照)
